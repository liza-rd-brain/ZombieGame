{"version":3,"sources":["features/MoveControls.tsx","features/Dice.tsx","shared/config/walls.ts","shared/config/index.ts","components/Health.tsx","business/phases/gameStarted/common/getNextPlayerCoord.ts","business/phases/gameStarted/common/getNeighboringCellList.ts","business/phases/gameStarted/common/checkCellHasWall.ts","components/Player/index.tsx","components/Player/canInteractWithCell.ts","components/Enemy.tsx","components/BoardsCard.tsx","features/PlayGrid/getCards.tsx","features/PlayGrid/getPlayersList.tsx","features/PlayGrid/getEnemyList.tsx","features/PlayGrid/Barrier.tsx","features/PlayGrid/getFilledPlayGrid.tsx","features/PlayGrid/index.tsx","components/HealthSlots.tsx","components/Inventory.tsx","features/PlayerStatus.tsx","features/StatusList.tsx","features/PlayersStatusList.tsx","pages/EndScreen.tsx","pages/StartScreen.tsx","business/initialState/getGameField/getFieldCells.ts","business/initialState/getGameField/spreadCards.ts","business/initialState/getGameField/index.ts","business/initialState/getPlayers.ts","business/initialState/getEnemies.ts","business/initialState/index.ts","business/phases/waitingStart/index.ts","business/phases/gameStarted/playerMove/checkCanTakeCell.ts","business/phases/gameStarted/common/getStateCardSelected.ts","business/phases/gameStarted/playerMove/index.ts","business/phases/gameStarted/playerMove/getPlayerMoveResult.ts","business/phases/gameStarted/playerMove/changePlayerCoord.ts","business/phases/gameStarted/takeCard/index.ts","business/phases/gameStarted/takeCard/openCard.ts","business/phases/gameStarted/takeCard/deleteCard.ts","business/phases/gameStarted/trownDice.ts","business/phases/gameStarted/interactEnemyCard/getBattleResult.ts","business/phases/gameStarted/interactEnemyCard/index.ts","business/phases/gameStarted/interactEnemyCard/openEnemyCard.ts","business/phases/gameStarted/applyCard/deleteSelectedCard.ts","business/phases/gameStarted/applyCard/changeHealth.ts","business/phases/gameStarted/applyCard/index.ts","business/phases/gameStarted/applyCard/getStateGiveCard.ts","business/phases/gameStarted/applyCard/getStateHealCurrPlayer.ts","business/phases/gameStarted/applyCard/getStateHealAnotherPlayer.ts","business/phases/gameStarted/applyCard/getStateHoleFilled.ts","business/phases/gameStarted/getPlayersOrder.ts","business/phases/endGame/index.ts","business/store.ts","business/reducer.ts","App.tsx","business/effects/useOpenCard.ts","business/effects/usePlayerMove.ts","business/effects/useEndScreen.ts","reportWebVitals.ts","index.tsx"],"names":["Arrow","styled","div","props","direction","ArrowContainer","MoveControls","dispatch","useDispatch","renderArrow","onClick","type","payload","DiceWrap","DiceButton","button","DiceNumber","Dice","useSelector","state","dice","diceNumber","Math","floor","random","CELLS_BARRIERS_LIST","coord","hor","vert","barrierList","name","isOpen","START_COORD","FINISH_COORD","APPERANCE_CARD","MOVE_DIRECTION_LIST","StyledHealthCard","apperance","Health","getNextPlayerCoord","currentCoord","split","currPlayerHor","currPlayerVert","nextPlayerVert","parseInt","nextPlayerHor","prevPlayerVert","prevPlayerHor","getNeighboringCellList","prevPlayerCoord","gameField","map","directionItem","filter","cellItem","values","checkCellHasWall","newPlayerCoord","playerList","numberOfPlayer","currCellCoord","currCell","nextCell","oppositeDirection","getOppositeDirection","currCellHasBarrier","checkCellOnBarrier","nextCellHasBarrier","cell","cellHasWall","find","barrier","cellHasClosedHole","PlayerCard","isCurrent","needHighlightning","PlayerCardList","PlayerList","playerListOnCell","getContextMenu","listForInteract","getAvailableCellList","chosedCard","inventory","card","isSelected","typeOfChosedCard","playerCardItem","index","canInteractWithPlayer","includes","id","orderNumber","calculateHighlightning","playerClickedHandler","gameState","availableCellList","nextPlayerCoord","canInteractWithCell","currPlayerCoord","availableCellsCoords","concat","isCurrentPlayer","console","log","EnemyCard","EnemiesCardList","EnemyList","enemyArray","list","item","StyledBoardsCard","BoardsCard","getCards","healthCardItem","cardItem","boardsCardItem","getPlayersList","playersList","playersArr","playerKey","push","length","getEnemyList","enemiesList","enemiesArr","enemiesKey","Wall","barrierItem","highlightningList","Barrier","orderIndex","cellValues","neighboringCellList","needCheckHighlightning","getHighlightningList","getHigtlightningDirection","cellType","currCoord","currCellHasHole","checkCellOnHole","nextCellHasHole","availableCell","selectedCard","cellHasWindow","cellHasDoor","Wrap","CellItem","hasMarker","getFilledPlayGrid","enemyList","orderGameCells","order","availableCells","GridItem","ContextMenu","x","y","Button","PlayGrid","useState","contextMenuState","updatecontextMenuState","height","playerEl","document","getElementById","playerCoord","getBoundingClientRect","useEffect","bodyElement","querySelector","callback","e","target","stopPropagation","prevState","removeEventListener","capture","addEventListener","playerNumber","className","HealthSlotList","HealthSlot","isFilled","HealthSlots","getHealthSlot","healthSlotFilled","playerHealth","getPlayerHealth","Array","fill","reduce","prev","currSlot","health","InventoryWrap","Slot","highlighting","Inventory","inventoryCard","inventoryCardindex","getChildrenComponent","PlayerStatusCard","CharacterAvatar","Status","HealthStatus","InventoryStatus","Column","PlayerStatus","StatusList","doEffect","gameResult","getTextStatus","PlayersListWrap","amount","HealthSlotsWrap","InventorysWrap","PlayersStatusList","player","Fragment","GameScore","EndScreen","StartButton","StartScreen","createEmptyFieldCells","cellList","emptyFieldItem","newEmptyGameField","forEach","getOrganizedFieldCells","emptyField","startIndex","finishIndex","getCellsWalls","cellsWithBarrierList","cellBarrier","cellIndex","cellWithoutBarrier","cellsWithBarriers","Object","fromEntries","cardsList","setCards","currCardSet","cellListWithCards","cellWithCards","getListForCards","filledСells","emptyCellsList","entries","AMOUNT_EMPTY_CELLS","amoutCurrentCards","prevkeyList","randomNumber","getRandomNumber","keyItem","arrNumber","maxNumber","number","getGameField","getCellOrder","gameFieldCells","cellsWithAllCards","gameFieldCellsWithPrevios","cellsForCards","filledWithCardsFieldCells","spreadCards","emptyFieldCells","fieldCellsWithWalls","getFieldCells","width","orderList","getPlayers","startCoord","getEnemies","getEmptyList","enemiesCoords","getListOfIndexes","getListOfEnemy","enemyCard","power","initialState","gameFieldWithoutEnemy","getInitialState","waitingStart","action","checkNextCellOccupied","newCoord","some","getStateCardSelected","currentCardIndex","newPlayerList","changeSelectedCard","hasAnyCardSelected","stateWithSelectedCard","stateWithoutSelectedCard","targetCard","newInventory","playerMove","getAvailableCells","getStatePlayerMoved","getStateClearedAvailableCells","newCellWithPlayer","isLastStepOfMove","takeFinish","takeCard","metEnemyCard","getPlayerMoveResult","changePlayerCoord","metBarrier","isNextCellOcupied","checkCanTakeCell","getStateOpenCard","getStateCardTaken","getStateDeletedCard","playerCoordIndex","cellWithOpenCard","cardItemWithOpenCard","openCard","newGameField","cardItems","newPlayer","cellWithoutCard","deleteCard","trownDice","getStatePlayerRunsAway","getStatePlayetLoseHealth","isPlayerAlive","getStatePLayerWon","newEnemyList","interactEnemyCard","getStateCheckApperance","getStateDiceIsThrown","getBattleResult","isNeedOpenEnemyCard","currEnemyCard","openedEnemyCard","openEnemyCard","deleteSelectedCard","indexCurrPlayer","currInventory","removedCardIndex","findIndex","indexOfCard","changeHealth","indexTarget","applyCard","chosenCardType","recipientPlayerNumber","currentPlayerInventory","recepientPlayerInventory","sharedCardIndex","sharedCard","sharedCardWithoutHighlightning","newCurrentPlayerInventory","newRecepientPlayerInventory","getStateGiveCard","indexChosenPlayer","newHealth","getStateHealCurrPlayer","getStateHealAnotherPlayer","cellWithChosedHole","barriersWithClosedHole","getStateHoleFilled","getPlayersOrder","numberCurrPlayer","nextPlayersNumber","AMOUNT_PLAYERS","endGame","store","createStore","phaseOuter","phaseInner","window","__REDUX_DEVTOOLS_EXTENSION__","Field","Game","LeftPanel","RightPanel","GameControls","GetApp","timerOpen","setTimeout","clearTimeout","timerTakeCard","timerChangePlayerHealth","timerDeleteCard","timerGetResult","useOpenCard","timerMarkCell","usePlayerMove","timer","useEndScreen","getGameScreen","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.760776d2.chunk.js","sourcesContent":["import React from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\n\r\nimport styled from \"styled-components\";\r\n\r\nimport { MoveDirection } from \"../business/types\";\r\n\r\ntype ArrowProps = {\r\n  direction: MoveDirection;\r\n};\r\n\r\nconst Arrow = styled.div<ArrowProps>`\r\n  text-align: center;\r\n  vertical-align: middle;\r\n  border: 1px solid lightgrey;\r\n  cursor: pointer;\r\n  &:hover {\r\n    color: pink;\r\n  }\r\n\r\n  &:active {\r\n    color: red;\r\n  }\r\n\r\n  transform: ${(props) => {\r\n    switch (props.direction) {\r\n      case \"top\":\r\n        return \"rotate(-90deg)\";\r\n      case \"bottom\":\r\n        return \"rotate(90deg)\";\r\n      case \"left\":\r\n        return \"rotate(-180deg)\";\r\n    }\r\n  }};\r\n\r\n  grid-area: ${(props) => {\r\n    switch (props.direction) {\r\n      case \"top\":\r\n        return \"arrow_top;\";\r\n      case \"bottom\":\r\n        return \"arrow_bottom\";\r\n      case \"left\":\r\n        return \"arrow_left\";\r\n      case \"right\":\r\n        return \"arrow_right\";\r\n    }\r\n  }};\r\n`;\r\n\r\nconst ArrowContainer = styled.div`\r\n  display: grid;\r\n  grid-template-areas:\r\n    \". arrow_top .\"\r\n    \"arrow_left . arrow_right \"\r\n    \". arrow_bottom . \";\r\n  width: 100px;\r\n  height: 100px;\r\n  & > * {\r\n    padding: 6px;\r\n    box-sizing: border-box;\r\n\r\n  }\r\n`;\r\n\r\nexport const MoveControls = () => {\r\n  const dispatch = useDispatch();\r\n\r\n  const renderArrow = (direction: MoveDirection) => {\r\n    return (\r\n      <Arrow\r\n        direction={direction}\r\n        onClick={() => {\r\n          dispatch({ type: \"playerMoved\", payload: direction });\r\n        }}\r\n      >\r\n        &gt;\r\n      </Arrow>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <ArrowContainer>\r\n      {renderArrow(\"top\")}\r\n      {renderArrow(\"right\")}\r\n      {renderArrow(\"left\")}\r\n      {renderArrow(\"bottom\")}\r\n    </ArrowContainer>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\n\r\nimport styled from \"styled-components\";\r\n\r\nimport { State } from \"../business/types\";\r\n\r\nconst DiceWrap = styled.div`\r\n  border: 1px solid lightgray;\r\n  width: 100px;\r\n  height: 100px;\r\n  display: grid;\r\n`;\r\n\r\nconst DiceButton = styled.button`\r\n  margin: 0 auto;\r\n`;\r\n\r\nconst DiceNumber = styled.div`\r\n  height: 30px;\r\n  margin-top: 20px;\r\n  text-align: center;\r\n`;\r\n\r\nconst maxNumber = 4;\r\n\r\nexport const Dice = () => {\r\n  const dispatch = useDispatch();\r\n  const [diceNumber] = useSelector((state: State) => [state.dice]);\r\n  const getNumber = () => {\r\n    return Math.floor(Math.random() * maxNumber + 1);\r\n  };\r\n\r\n  return (\r\n    <DiceWrap>\r\n      <DiceNumber>{diceNumber}</DiceNumber>\r\n      <DiceButton\r\n        onClick={() => {\r\n          dispatch({\r\n            type: \"diceThrown\",\r\n            payload: getNumber(),\r\n          });\r\n        }}\r\n      >\r\n        бросить кубик\r\n      </DiceButton>\r\n    </DiceWrap>\r\n  );\r\n};\r\n","import { CellsBarrierListType } from \"../../business/types\";\r\n\r\n// The array is convenient for iterating\r\nexport const CELLS_BARRIERS_LIST: CellsBarrierListType = [\r\n  {\r\n    coord: { hor: 2, vert: 2 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"bottom\",\r\n        isOpen: true,\r\n      },\r\n      {\r\n        name: \"wall\",\r\n        direction: \"left\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n\r\n  {\r\n    coord: { hor: 2, vert: 3 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"left\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n\r\n  {\r\n    coord: { hor: 2, vert: 4 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"left\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n\r\n  {\r\n    coord: { hor: 2, vert: 5 },\r\n    barrierList: [\r\n      {\r\n        name: \"window\",\r\n        direction: \"left\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    coord: { hor: 2, vert: 6 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"left\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    coord: { hor: 2, vert: 7 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"bottom\",\r\n        isOpen: true,\r\n      },\r\n      {\r\n        name: \"wall\",\r\n        direction: \"left\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n\r\n  {\r\n    coord: { hor: 2, vert: 8 },\r\n    barrierList: [\r\n      {\r\n        name: \"window\",\r\n        direction: \"left\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n\r\n  {\r\n    coord: { hor: 2, vert: 9 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"left\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n\r\n  {\r\n    coord: { hor: 2, vert: 10 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"bottom\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n\r\n  {\r\n    coord: { hor: 3, vert: 10 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"bottom\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    coord: { hor: 4, vert: 10 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"bottom\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    coord: { hor: 5, vert: 10 },\r\n    barrierList: [\r\n      {\r\n        name: \"door\",\r\n        direction: \"bottom\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    coord: { hor: 6, vert: 10 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"bottom\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    coord: { hor: 7, vert: 10 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"bottom\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n\r\n  {\r\n    coord: { hor: 8, vert: 10 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"bottom\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n\r\n  {\r\n    coord: { hor: 9, vert: 10 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"bottom\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    coord: { hor: 10, vert: 10 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"bottom\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    coord: { hor: 7, vert: 9 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"left\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n\r\n  {\r\n    coord: { hor: 3, vert: 2 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"bottom\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n\r\n  {\r\n    coord: { hor: 4, vert: 2 },\r\n    barrierList: [\r\n      {\r\n        name: \"door\",\r\n        direction: \"bottom\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n\r\n  {\r\n    coord: { hor: 5, vert: 2 },\r\n    barrierList: [\r\n      {\r\n        name: \"window\",\r\n        direction: \"bottom\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    coord: { hor: 6, vert: 2 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"bottom\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    coord: { hor: 7, vert: 2 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"bottom\",\r\n        isOpen: true,\r\n      },\r\n      {\r\n        name: \"wall\",\r\n        direction: \"left\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n\r\n  {\r\n    coord: { hor: 8, vert: 2 },\r\n    barrierList: [\r\n      {\r\n        name: \"window\",\r\n        direction: \"bottom\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    coord: { hor: 9, vert: 2 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"bottom\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n\r\n  {\r\n    coord: { hor: 10, vert: 2 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"bottom\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n\r\n  {\r\n    coord: { hor: 10, vert: 7 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"bottom\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n\r\n  {\r\n    coord: { hor: 3, vert: 7 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"bottom\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    coord: { hor: 4, vert: 9 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"left\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n\r\n  {\r\n    coord: { hor: 4, vert: 8 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"left\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    coord: { hor: 4, vert: 7 },\r\n    barrierList: [\r\n      {\r\n        name: \"door\",\r\n        direction: \"left\",\r\n        isOpen: true,\r\n      },\r\n      {\r\n        name: \"door\",\r\n        direction: \"bottom\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n\r\n  {\r\n    coord: { hor: 5, vert: 7 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"bottom\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    coord: { hor: 6, vert: 7 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"bottom\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    coord: { hor: 7, vert: 7 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"left\",\r\n        isOpen: true,\r\n      },\r\n      {\r\n        name: \"wall\",\r\n        direction: \"bottom\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n\r\n  {\r\n    coord: { hor: 7, vert: 8 },\r\n    barrierList: [\r\n      {\r\n        name: \"door\",\r\n        direction: \"left\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    coord: { hor: 8, vert: 7 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"bottom\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    coord: { hor: 9, vert: 7 },\r\n    barrierList: [\r\n      {\r\n        name: \"door\",\r\n        direction: \"bottom\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    coord: { hor: 7, vert: 6 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"left\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    coord: { hor: 7, vert: 5 },\r\n    barrierList: [\r\n      {\r\n        name: \"door\",\r\n        direction: \"left\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    coord: { hor: 7, vert: 4 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"left\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    coord: { hor: 7, vert: 3 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"left\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n\r\n  {\r\n    coord: { hor: 11, vert: 9 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"left\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n\r\n  {\r\n    coord: { hor: 11, vert: 8 },\r\n    barrierList: [\r\n      {\r\n        name: \"window\",\r\n        direction: \"left\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    coord: { hor: 11, vert: 7 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"left\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    coord: { hor: 11, vert: 6 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"left\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    coord: { hor: 11, vert: 5 },\r\n    barrierList: [\r\n      {\r\n        name: \"window\",\r\n        direction: \"left\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    coord: { hor: 11, vert: 4 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"left\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    coord: { hor: 11, vert: 3 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"left\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    coord: { hor: 11, vert: 2 },\r\n    barrierList: [\r\n      {\r\n        name: \"wall\",\r\n        direction: \"left\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n\r\n  //it is needed for now for pretty  wall painting\r\n  {\r\n    coord: { hor: 11, vert: 10 },\r\n    barrierList: [\r\n      {\r\n        name: null,\r\n        direction: \"left\",\r\n        isOpen: true,\r\n      },\r\n    ],\r\n  },\r\n];\r\n","import { MoveDirectionList } from \"../../business/types\";\r\n\r\nexport const START_COORD = { hor: 3, vert: 5 };\r\nexport const FINISH_COORD = { hor: 11, vert: 11 };\r\nexport const INITIAL_PLAYER_HEALTH = 3;\r\nexport const AMOUNT_HEALTH_ITEMS = 50;\r\nexport const AMOUNT_BOARDS_ITEMS = 50;\r\nexport const AMOUNT_PLAYERS = 1;\r\nexport const AMOUNT_ENEMIES = 0;\r\nexport const APPERANCE_CARD = \"open\";\r\n\r\nexport const MAX_HEALTH_AMOUNT = 7;\r\n\r\nexport const MOVE_DIRECTION_LIST: MoveDirectionList = [\r\n  \"top\",\r\n  \"right\",\r\n  \"bottom\",\r\n  \"left\",\r\n];\r\n\r\nexport { CELLS_BARRIERS_LIST } from \"./walls\";\r\n","import styled from \"styled-components\";\r\n\r\nimport { HealthCardType } from \"../business/types\";\r\n\r\ntype HealthApperanceType = {\r\n  apperance?: \"closed\" | \"open\";\r\n};\r\n\r\nexport const StyledHealthCard = styled.div<HealthApperanceType>`\r\n  position: absolute;\r\n  border: 5px solid;\r\n  width: 15px;\r\n  height: 15px;\r\n  margin: 12px;\r\n\r\n  background-color: ${(props) => {\r\n    if (props.apperance === \"closed\") {\r\n      return \"gray\";\r\n    } else {\r\n      return \"green\";\r\n    }\r\n  }};\r\n\r\n  border-color: ${(props) => {\r\n    if (props.apperance === \"closed\") {\r\n      return \"gray\";\r\n    } else {\r\n      return \"green\";\r\n    }\r\n  }};\r\n`;\r\n\r\nexport const Health = (props: HealthApperanceType) => {\r\n  return <StyledHealthCard {...props}></StyledHealthCard>;\r\n};\r\n","import { MoveDirection } from \"../../../types\";\r\n\r\n/**\r\n * Returns new coordinate of player.\r\n * @param currentCoord A string of current coordinate.\r\n * @param direction  A string of direction.\r\n * @returns A string with new coordinate.\r\n */\r\n\r\nexport const getNextPlayerCoord = (\r\n  currentCoord: string,\r\n  direction: MoveDirection\r\n) => {\r\n  \r\n  const [currPlayerHor, currPlayerVert] = currentCoord.split(\".\");\r\n  const nextPlayerVert = parseInt(currPlayerVert) + 1;\r\n  const nextPlayerHor = parseInt(currPlayerHor) + 1;\r\n  const prevPlayerVert = parseInt(currPlayerVert) - 1;\r\n  const prevPlayerHor = parseInt(currPlayerHor) - 1;\r\n\r\n  switch (direction) {\r\n    case \"top\": {\r\n      return `${currPlayerHor}.${nextPlayerVert}`;\r\n    }\r\n\r\n    case \"bottom\": {\r\n      return `${currPlayerHor}.${prevPlayerVert}`;\r\n    }\r\n\r\n    case \"left\": {\r\n      return `${prevPlayerHor}.${currPlayerVert}`;\r\n    }\r\n\r\n    case \"right\": {\r\n      return `${nextPlayerHor}.${currPlayerVert}`;\r\n    }\r\n\r\n    default:\r\n      return `${currPlayerHor}.${currPlayerVert}`;\r\n  }\r\n};\r\n","import { State, AvailableCellListType, GameField } from \"../../../types\";\r\nimport { MOVE_DIRECTION_LIST } from \"../../../../shared/config\";\r\nimport { getNextPlayerCoord } from \"./getNextPlayerCoord\";\r\n\r\n/**\r\n * Returns the coordinates of neighboribgCells that lying in the GameField.\r\n */\r\nexport const getNeighboringCellList = (\r\n  prevPlayerCoord: string,\r\n  gameField: GameField\r\n): AvailableCellListType => {\r\n  const coordNeighboringCells: AvailableCellListType = MOVE_DIRECTION_LIST.map(\r\n    (directionItem) => {\r\n      return {\r\n        direction: directionItem,\r\n        coord: getNextPlayerCoord(prevPlayerCoord, directionItem),\r\n      };\r\n    }\r\n  );\r\n\r\n  /**\r\n   * Returns the coordinates that lying in the GameField.\r\n   */\r\n  const existanceInGameFieldCells: AvailableCellListType =\r\n    coordNeighboringCells.filter((cellItem) => {\r\n      const { direction, coord } = cellItem;\r\n      return gameField.values[coord];\r\n    });\r\n  return existanceInGameFieldCells;\r\n};\r\n","import { State, PlayerListType, MoveDirection, CellType } from \"../../../types\";\r\n\r\n/**\r\n * Returns true if current or next cell has wall\r\n */\r\nexport const checkCellHasWall = (\r\n  state: State,\r\n  newPlayerCoord: string,\r\n  direction: MoveDirection\r\n) => {\r\n  const { playerList, numberOfPlayer, gameField } = state;\r\n  const currCellCoord = playerList[numberOfPlayer].coord;\r\n  const currCell = gameField.values[currCellCoord];\r\n  const nextCell = gameField.values[newPlayerCoord];\r\n  const oppositeDirection = getOppositeDirection(direction);\r\n  const currCellHasBarrier = checkCellOnBarrier(currCell, direction);\r\n\r\n  const nextCellHasBarrier = checkCellOnBarrier(nextCell, oppositeDirection);\r\n\r\n  if (currCellHasBarrier || nextCellHasBarrier) {\r\n    return true;\r\n  } else {\r\n    return false;\r\n  }\r\n};\r\n\r\nconst checkCellOnBarrier = (cell: CellType, direction: MoveDirection) => {\r\n  if (cell.name === \"commonCell\") {\r\n    //Now in config just left and bottom walls\r\n    if (direction === \"left\" || direction === \"bottom\") {\r\n      const cellHasWall = cell.barrierList?.find(\r\n        (barrier) => barrier.name === \"wall\" && barrier.direction === direction\r\n      )\r\n        ? true\r\n        : false;\r\n      const cellHasClosedHole = cell.barrierList?.find(\r\n        (barrier) => barrier.isOpen === false && barrier.direction === direction\r\n      )\r\n        ? true\r\n        : false;\r\n      const cellHasBarrier = cellHasWall || cellHasClosedHole;\r\n      return cellHasBarrier;\r\n    }\r\n    return false;\r\n  }\r\n};\r\n\r\nconst getOppositeDirection = (direction: MoveDirection): MoveDirection => {\r\n  switch (direction) {\r\n    case \"top\": {\r\n      return \"bottom\";\r\n    }\r\n    case \"bottom\": {\r\n      return \"top\";\r\n    }\r\n    case \"left\": {\r\n      return \"right\";\r\n    }\r\n    case \"right\": {\r\n      return \"left\";\r\n    }\r\n  }\r\n};\r\n","import { useDispatch, useSelector } from \"react-redux\";\r\nimport styled from \"styled-components\";\r\n\r\nimport {\r\n  PlayerCardType,\r\n  AvailableCellListType,\r\n  State,\r\n} from \"../../business/types\";\r\nimport { getNeighboringCellList } from \"../../business/phases/gameStarted/common/getNeighboringCellList\";\r\nimport { canInteractWithCell } from \"./canInteractWithCell\";\r\n\r\ntype PlayerItem = {\r\n  isCurrent: boolean;\r\n  needHighlightning?: boolean;\r\n};\r\n\r\ntype PlayerListItem = {\r\n  playerListOnCell: PlayerCardType[];\r\n  getContextMenu: Function;\r\n};\r\n\r\ntype ContextMenuType = {\r\n  visible: boolean;\r\n};\r\n\r\ntype TypeOfCard = \"boards\" | \"health\" | null;\r\n\r\nconst PlayerCard = styled.div<PlayerItem>`\r\n  background-color: #9f3f3f;\r\n  border-radius: 50%;\r\n  width: 20px;\r\n  height: 20px;\r\n  margin: 0px;\r\n  z-index: 3;\r\n  text-align: center;\r\n  padding: 4px;\r\n  box-sizing: border-box;\r\n  cursor: default;\r\n\r\n  background-color: ${(props) => {\r\n    if (props.isCurrent) {\r\n      return \"red\";\r\n    }\r\n  }};\r\n\r\n  &:before {\r\n    content: \"\";\r\n    position: absolute;\r\n    width: 12px;\r\n    height: 12px;\r\n    border-radius: 50%;\r\n    border: ${(props) => {\r\n      if (props.needHighlightning) {\r\n        return \"3px solid #34b834;\";\r\n      }\r\n    }};\r\n    pointer-events: none;\r\n    opacity: 0.5;\r\n    padding: 4px;\r\n\r\n    left: 0px;\r\n    top: 0px;\r\n  }\r\n`;\r\n\r\nconst PlayerCardList = styled.div`\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  position: absolute;\r\n  z-index: 3;\r\n  font-size: 12px;\r\n  font-weight: bold;\r\n  color: white;\r\n  padding: 3px;\r\n`;\r\n\r\nexport const PlayerList = (props: PlayerListItem) => {\r\n  const dispatch = useDispatch();\r\n  const state = useSelector((state: State) => ({\r\n    ...state,\r\n  }));\r\n  const { playerList, numberOfPlayer } = state;\r\n\r\n  /**\r\n   *  playerListOnCell -is all player in one cell\r\n   */\r\n  const { playerListOnCell, getContextMenu } = props;\r\n\r\n  const listForInteract = getAvailableCellList(state);\r\n  const currPlayer = playerList[numberOfPlayer];\r\n  const chosedCard = currPlayer.inventory.find(\r\n    (card) => card?.isSelected === true\r\n  );\r\n  const typeOfChosedCard = chosedCard?.name || null;\r\n\r\n  return (\r\n    <PlayerCardList>\r\n      {playerListOnCell.map((playerCardItem, index) => {\r\n        const canInteractWithPlayer = listForInteract.includes(\r\n          playerCardItem.coord\r\n        );\r\n\r\n        return (\r\n          <PlayerCard\r\n            id={`player${playerCardItem.orderNumber}`}\r\n            key={index}\r\n            isCurrent={numberOfPlayer == playerCardItem.orderNumber}\r\n            needHighlightning={calculateHighlightning(\r\n              canInteractWithPlayer,\r\n              typeOfChosedCard\r\n            )}\r\n            onClick={() => {\r\n              playerClickedHandler(\r\n                getContextMenu,\r\n                playerCardItem,\r\n                numberOfPlayer,\r\n                canInteractWithPlayer,\r\n                typeOfChosedCard,\r\n                dispatch\r\n              );\r\n            }}\r\n          >\r\n            {playerCardItem.orderNumber + 1}\r\n          </PlayerCard>\r\n        );\r\n      })}\r\n    </PlayerCardList>\r\n  );\r\n};\r\n\r\nconst getAvailableCellList = (state: State) => {\r\n  const { gameState, playerList, numberOfPlayer, gameField } = state;\r\n  const prevPlayerCoord = playerList[numberOfPlayer].coord;\r\n  const neighboringCellList = getNeighboringCellList(\r\n    prevPlayerCoord,\r\n    gameField\r\n  );\r\n  const availableCellList: AvailableCellListType = neighboringCellList.filter(\r\n    (cellItem) => {\r\n      const { direction, coord } = cellItem;\r\n\r\n      return canInteractWithCell(state, coord, direction);\r\n    }\r\n  );\r\n\r\n  const currPlayerCoord = playerList[numberOfPlayer].coord;\r\n\r\n  const availableCellsCoords = availableCellList\r\n    .map((cellItem) => {\r\n      const { direction, coord } = cellItem;\r\n      return coord;\r\n    })\r\n    .concat(currPlayerCoord);\r\n\r\n  switch (gameState.type) {\r\n    case \"gameStarted.applyCard\":\r\n      return availableCellsCoords;\r\n\r\n    default:\r\n      return [];\r\n  }\r\n};\r\n\r\nconst playerClickedHandler = (\r\n  getContextMenu: Function,\r\n  playerCardItem: PlayerCardType,\r\n  numberOfPlayer: number,\r\n  canInteractWithPlayer: boolean,\r\n  typeOfChosedCard: TypeOfCard,\r\n  dispatch: Function\r\n) => {\r\n  const isCurrentPlayer = playerCardItem.orderNumber == numberOfPlayer;\r\n  switch (canInteractWithPlayer) {\r\n    case true: {\r\n      switch (typeOfChosedCard) {\r\n        case \"health\": {\r\n          switch (isCurrentPlayer) {\r\n            case true: {\r\n              dispatch({\r\n                type: \"req-healPlayer\",\r\n                payload: playerCardItem.orderNumber,\r\n              });\r\n              break;\r\n            }\r\n\r\n            case false: {\r\n              getContextMenu(playerCardItem.orderNumber);\r\n            }\r\n          }\r\n\r\n          break;\r\n        }\r\n        case \"boards\": {\r\n          /**\r\n           * For preventing sharing any cards with himself\r\n           */\r\n          switch (isCurrentPlayer) {\r\n            case true: {\r\n              break;\r\n            }\r\n            case false: {\r\n              dispatch({\r\n                type: \"req-shareCard\",\r\n                payload: playerCardItem.orderNumber,\r\n              });\r\n              break;\r\n            }\r\n          }\r\n        }\r\n      }\r\n      break;\r\n    }\r\n    case false: {\r\n      console.log(\"не можем взаимодействовать с игроком игрока\");\r\n      break;\r\n    }\r\n    default:\r\n      break;\r\n  }\r\n};\r\n\r\nconst calculateHighlightning = (\r\n  canInteractWithPlayer: boolean,\r\n  typeOfChosedCard: TypeOfCard\r\n) => {\r\n  switch (canInteractWithPlayer) {\r\n    case true: {\r\n      switch (typeOfChosedCard) {\r\n        case \"boards\": {\r\n          return false;\r\n        }\r\n\r\n        case \"health\": {\r\n          return true;\r\n        }\r\n\r\n        default: {\r\n          return false;\r\n        }\r\n      }\r\n    }\r\n\r\n    case false: {\r\n      return false;\r\n    }\r\n\r\n    default: {\r\n      return false;\r\n    }\r\n  }\r\n};\r\n","import {\r\n  State,\r\n  PlayerListType,\r\n  MoveDirection,\r\n  CellType,\r\n} from \"../../business/types\";\r\nimport { checkCellHasWall } from \"../../business/phases/gameStarted/common\";\r\n/** Cheking the cases when can't take the cell. In default we think that can. */\r\nexport const canInteractWithCell = (\r\n  state: State,\r\n  nextPlayerCoord: string,\r\n  direction: MoveDirection\r\n) => {\r\n  const { gameField, playerList, dice } = state;\r\n  const nextCellForPlayer = gameField.values[nextPlayerCoord];\r\n  const nextCellOutOfGameField = nextCellForPlayer ? false : true;\r\n\r\n  switch (nextCellOutOfGameField) {\r\n    case true: {\r\n      return false;\r\n    }\r\n\r\n    case false: {\r\n      const metBarrier = checkCellHasWall(state, nextPlayerCoord, direction);\r\n\r\n      switch (true) {\r\n        case metBarrier: {\r\n          return false;\r\n        }\r\n\r\n        default: {\r\n          return true;\r\n        }\r\n      }\r\n    }\r\n    default: {\r\n      return true;\r\n    }\r\n  }\r\n};\r\n","import styled from \"styled-components\";\r\n\r\nimport { EnemyCardType } from \"../business/types\";\r\n\r\ntype EnemyArray = {\r\n  list: EnemyCardType[];\r\n};\r\n\r\nconst EnemyCard = styled.div<EnemyCardType>`\r\n  position: absolute;\r\n  border: 5px solid;\r\n  width: 15px;\r\n  height: 15px;\r\n  margin: 12px;\r\n  background-color: ${(props) => {\r\n    if (props.apperance === \"closed\") {\r\n      return \"lightgray\";\r\n    } else {\r\n      return \"navy\";\r\n    }\r\n  }};\r\n\r\n  border-color: ${(props) => {\r\n    if (props.apperance === \"closed\") {\r\n      return \"lightgray\";\r\n    } else {\r\n      return \"navy\";\r\n    }\r\n  }};\r\n`;\r\n\r\nconst EnemiesCardList = styled.div`\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  position: absolute;\r\n  font-size: 10px;\r\n`;\r\n\r\nexport const EnemyList = (props: EnemyArray) => {\r\n  const enemyArray = props.list;\r\n  return (\r\n    <EnemiesCardList>\r\n      {enemyArray.map((item, index) => (\r\n        <EnemyCard key={index} {...item} />\r\n      ))}\r\n    </EnemiesCardList>\r\n  );\r\n};\r\n","import styled from \"styled-components\";\r\n\r\ntype BoardsApperanceType = {\r\n  apperance?: \"closed\" | \"open\";\r\n};\r\n\r\nconst StyledBoardsCard = styled.div<BoardsApperanceType>`\r\n  position: absolute;\r\n  border: 1px solid;\r\n  width: 20px;\r\n  height: 20px;\r\n  margin: 12px;\r\n  color: black;\r\n  font-size: 20px;\r\n  text-align: center;\r\n  background-color: ${(props) => {\r\n    if (props.apperance === \"closed\") {\r\n      return \"gray\";\r\n    } else {\r\n      return \"white\";\r\n    }\r\n  }};\r\n\r\n  border-color: ${(props) => {\r\n    if (props.apperance === \"closed\") {\r\n      return \"gray\";\r\n    } else {\r\n      return \"gray\";\r\n    }\r\n  }};\r\n`;\r\n\r\nexport const BoardsCard = (props: BoardsApperanceType) => {\r\n  return (\r\n    <StyledBoardsCard {...props}>\r\n      {props.apperance === \"closed\" ? null : \"X\"}\r\n    </StyledBoardsCard>\r\n  );\r\n};\r\n","import { Health, BoardsCard } from \"../../components\";\r\nimport { CellType } from \"../../business/types\";\r\n\r\nexport const getCards = (cell: CellType) => {\r\n  const healthCardItem = cell.cardItem.find(\r\n    (cardItem) => cardItem?.name === \"health\"\r\n  );\r\n\r\n  const boardsCardItem = cell.cardItem.find(\r\n    (cardItem) => cardItem?.name === \"boards\"\r\n  );\r\n\r\n  return (\r\n    <>\r\n      {healthCardItem ? <Health apperance={healthCardItem.apperance} /> : null}\r\n      {boardsCardItem ? (\r\n        <BoardsCard apperance={boardsCardItem.apperance} />\r\n      ) : null}\r\n    </>\r\n  );\r\n};\r\n","import { PlayerList } from \"../../components\";\r\n\r\nimport { PlayerListType, PlayerCardType } from \"../../business/types\";\r\n\r\nexport const getPlayersList = (\r\n  index: string,\r\n  playersList: PlayerListType,\r\n  numberOfPlayer: number,\r\n  getContextMenu: Function\r\n) => {\r\n  let playersArr: PlayerCardType[] = [];\r\n\r\n  for (let playerKey in playersList) {\r\n    const playerCard = playersList[playerKey];\r\n    const playerCoord = playerCard.coord;\r\n    if (playerCoord === index) {\r\n      playersArr.push(playersList[playerKey]);\r\n    }\r\n  }\r\n  if (playersArr.length > 0) {\r\n    return (\r\n      <PlayerList\r\n        playerListOnCell={playersArr}\r\n        getContextMenu={getContextMenu}\r\n      />\r\n    );\r\n  } else return null;\r\n};\r\n","import { EnemyList } from \"../../components\";\r\n\r\nimport { EnemyListType, EnemyCardType } from \"../../business/types\";\r\n\r\nexport const getEnemyList = (index: string, enemiesList: EnemyListType) => {\r\n  let enemiesArr: EnemyCardType[] = [];\r\n  for (let enemiesKey in enemiesList) {\r\n    const enemiesCard = enemiesList[enemiesKey];\r\n    const enemiesCoord = enemiesCard.coord;\r\n    if (enemiesCoord === index) {\r\n      enemiesArr.push(enemiesList[enemiesKey]);\r\n    }\r\n  }\r\n  if (enemiesArr.length > 0) {\r\n    return <EnemyList list={enemiesArr} />;\r\n  } else return null;\r\n};\r\n","import { useDispatch, useSelector } from \"react-redux\";\r\nimport { useEffect, useState } from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nimport { getNeighboringCellList } from \"../../business/phases/gameStarted/common/getNeighboringCellList\";\r\n\r\nimport {\r\n  State,\r\n  MoveDirection,\r\n  BarrierItem,\r\n  CommonCell,\r\n  AvailableCellListType,\r\n  GameField,\r\n  GameState,\r\n  PlayerListType,\r\n  CellType,\r\n  AvailableCellType,\r\n} from \"../../business/types\";\r\n\r\ntype WallType = {\r\n  barrierItem?: BarrierItem;\r\n  //TODO: поправить тип?\r\n  highlightningList: (MoveDirection | null)[] | null;\r\n  onClick: Function;\r\n};\r\n\r\ntype BarrierCoord = {\r\n  orderIndex: string;\r\n};\r\n\r\nconst Wall = styled.div<WallType>`\r\n  &:before {\r\n    content: \"\";\r\n    position: absolute;\r\n    width: 50px;\r\n    height: 50px;\r\n    bottom: 0px;\r\n    z-index: 5;\r\n    height: ${(props) => {\r\n      if (props.barrierItem?.direction === \"bottom\") {\r\n        if (props.barrierItem?.isOpen === false) {\r\n          return \"10px\";\r\n        } else {\r\n          switch (props.barrierItem.name) {\r\n            case \"wall\": {\r\n              return \"5px\";\r\n            }\r\n            case \"door\": {\r\n              return \"3px\";\r\n            }\r\n            case \"window\": {\r\n              return \"3px\";\r\n            }\r\n            default:\r\n              return \"0px\";\r\n          }\r\n        }\r\n      } else if (\r\n        props.barrierItem &&\r\n        props.barrierItem.direction === \"left\" &&\r\n        props.barrierItem.name !== null\r\n      ) {\r\n        return \"50px\";\r\n        //it is needed for now for pretty  wall painting\r\n      } else if (props.barrierItem && props.barrierItem.name === null) {\r\n        return \"5px\";\r\n      } else {\r\n        return \"0px\";\r\n      }\r\n    }};\r\n\r\n    width: ${(props) => {\r\n      if (props.barrierItem?.direction === \"left\") {\r\n        if (props.barrierItem?.isOpen === false) {\r\n          return \"10px\";\r\n        } else {\r\n          switch (props.barrierItem.name) {\r\n            case \"wall\": {\r\n              return \"5px \";\r\n            }\r\n            case \"door\": {\r\n              return \"3px\";\r\n            }\r\n            case \"window\": {\r\n              return \"3px\";\r\n            }\r\n            default:\r\n              return \"5px\";\r\n          }\r\n        }\r\n      } else {\r\n        return \"none\";\r\n      }\r\n    }};\r\n\r\n    background-color: ${(props) => {\r\n      if (props.barrierItem?.isOpen) {\r\n        const needHighlightning = props.highlightningList?.find((item) => {\r\n          return item === \"bottom\" || \"left\";\r\n        });\r\n\r\n        switch (props.barrierItem.name) {\r\n          case \"wall\": {\r\n            return \"#f09308;\";\r\n          }\r\n          case \"door\": {\r\n            if (needHighlightning) {\r\n              return \"#78ff2d\";\r\n            } else {\r\n              return \" #584324;\";\r\n            }\r\n          }\r\n          case \"window\": {\r\n            if (needHighlightning) {\r\n              return \"#78ff2d\";\r\n            } else {\r\n              return \" #a3cdd8;\";\r\n            }\r\n          }\r\n          default:\r\n            return \"#f09308\";\r\n        }\r\n      } else if (props.barrierItem?.isOpen === false) {\r\n        return \"#66615d;\";\r\n      } else {\r\n        return \"none\";\r\n      }\r\n    }};\r\n  }\r\n  &:after {\r\n    content: \"\";\r\n    z-index: 5;\r\n    position: absolute;\r\n    width: 50px;\r\n    height: 50px;\r\n\r\n    top: ${(props) => {\r\n      if (props.barrierItem?.direction === \"left\") {\r\n        return \"0\";\r\n      }\r\n    }};\r\n    height: ${(props) => {\r\n      if (props.barrierItem?.direction === \"bottom\" && props.barrierItem) {\r\n        return \"20px\";\r\n      }\r\n    }};\r\n    width: ${(props) => {\r\n      if (props.barrierItem?.direction === \"left\") {\r\n        return \"20px\";\r\n      }\r\n    }};\r\n    bottom: ${(props) => {\r\n      if (props.barrierItem?.direction === \"bottom\") {\r\n        return \"-10px\";\r\n      }\r\n    }};\r\n    left: ${(props) => {\r\n      if (props.barrierItem?.direction === \"left\") {\r\n        return \"-10px\";\r\n      }\r\n    }};\r\n\r\n    background-color: ${(props) => {\r\n      if (props.barrierItem?.isOpen) {\r\n        const needHighlightning = props.highlightningList?.find((item) => {\r\n          return item === \"bottom\" || \"left\";\r\n        });\r\n\r\n        if (needHighlightning) {\r\n          return \"#79fe2f3d\";\r\n        } else {\r\n          return \"none\";\r\n        }\r\n      }\r\n    }};\r\n  }\r\n`;\r\n\r\nexport const Barrier = (props: BarrierCoord) => {\r\n  const dispatch = useDispatch();\r\n  const state = useSelector((state: State) => ({\r\n    ...state,\r\n  }));\r\n\r\n  const { gameField, playerList, numberOfPlayer, gameState } = state;\r\n\r\n  const orderIndex = props.orderIndex;\r\n  const cellValues = gameField.values[orderIndex];\r\n  const currPlayerCoord = playerList[numberOfPlayer].coord;\r\n\r\n  const neighboringCellList = getNeighboringCellList(\r\n    currPlayerCoord,\r\n    gameField\r\n  );\r\n\r\n  const neighboringCellListCoord = neighboringCellList.map((cellItem) => {\r\n    const { direction, coord } = cellItem;\r\n    return coord;\r\n  });\r\n\r\n  const checkCellListCoord = neighboringCellListCoord.concat(currPlayerCoord);\r\n\r\n  const needCheckHighlightning = checkCellListCoord.find(\r\n    (coord) => orderIndex === coord\r\n  );\r\n\r\n  const highlightningList = getHighlightningList(\r\n    neighboringCellList,\r\n    gameField,\r\n    currPlayerCoord,\r\n    gameState,\r\n    playerList,\r\n    numberOfPlayer\r\n  );\r\n\r\n  switch (cellValues.name) {\r\n    case \"commonCell\": {\r\n      const barrierList = cellValues.barrierList?.map((barrier) => {\r\n        return (\r\n          <Wall\r\n            key={barrier.direction}\r\n            barrierItem={barrier}\r\n            highlightningList={\r\n              needCheckHighlightning\r\n                ? getHigtlightningDirection(\r\n                    highlightningList,\r\n                    orderIndex,\r\n                    barrier.direction\r\n                  )\r\n                : null\r\n            }\r\n            onClick={() => {\r\n              const canCloseHole = highlightningList.find((cellType) => {\r\n                return (\r\n                  cellType?.coord === orderIndex &&\r\n                  cellType?.direction === barrier.direction &&\r\n                  barrier.isOpen === true\r\n                );\r\n              })\r\n                ? true\r\n                : false;\r\n              if (canCloseHole) {\r\n                dispatch({\r\n                  type: \"req-fillHole\",\r\n                  payload: { coord: orderIndex, direction: barrier.direction },\r\n                });\r\n              } else {\r\n                return null;\r\n              }\r\n            }}\r\n          >\r\n            {\" \"}\r\n          </Wall>\r\n        );\r\n      });\r\n      return <>{barrierList}</>;\r\n    }\r\n    default: {\r\n      return null;\r\n    }\r\n  }\r\n};\r\n\r\nconst getHigtlightningDirection = (\r\n  highlightningList: (AvailableCellType | null)[],\r\n  orderIndex: string,\r\n  direction: MoveDirection\r\n) => {\r\n  const currList = highlightningList.filter((cellItem) => {\r\n    return cellItem?.coord === orderIndex && cellItem?.direction === direction;\r\n  });\r\n\r\n  const structuredList = currList.map((cellItem) => {\r\n    if (cellItem) {\r\n      const { direction, coord } = cellItem;\r\n      return direction;\r\n    } else {\r\n      return null;\r\n    }\r\n  });\r\n\r\n  return structuredList;\r\n};\r\n\r\n/**\r\n * Check the neifhboring of that coord.\r\n * Have they door or window\r\n */\r\nconst getHighlightningList = (\r\n  neighboringCellList: AvailableCellListType,\r\n  gameField: GameField,\r\n  currCoord: string,\r\n  gameState: GameState,\r\n  playerList: PlayerListType,\r\n  numberOfPlayer: number\r\n) => {\r\n  const currCell = gameField.values[currCoord];\r\n\r\n  const availableCellList = neighboringCellList\r\n    .map((cellItem) => {\r\n      const { direction, coord } = cellItem;\r\n      const currCellHasHole = checkCellOnHole(currCell, direction);\r\n      const nextCell = gameField.values[coord];\r\n      const oppositeDirection = getOppositeDirection(direction);\r\n      const nextCellHasHole = checkCellOnHole(nextCell, oppositeDirection);\r\n      if (currCellHasHole) {\r\n        const cellItemWithHole: AvailableCellType = {\r\n          direction,\r\n          coord: currCoord,\r\n        };\r\n\r\n        return cellItemWithHole;\r\n      } else if (nextCellHasHole) {\r\n        const cellItemWithHole: AvailableCellType = {\r\n          direction: oppositeDirection,\r\n          coord,\r\n        };\r\n        return cellItemWithHole;\r\n      } else {\r\n        return null;\r\n      }\r\n    })\r\n    .filter((availableCell) => availableCell !== null);\r\n\r\n  switch (gameState.type) {\r\n    case \"gameStarted.applyCard\":\r\n      const cardItemList = playerList[numberOfPlayer].inventory;\r\n      const selectedCard = cardItemList.find(\r\n        (cardItem) => cardItem?.isSelected === true\r\n      );\r\n      const typeOfSelectedCard = selectedCard?.name;\r\n      if (typeOfSelectedCard === \"boards\") {\r\n        return availableCellList;\r\n      } else {\r\n        return [];\r\n      }\r\n\r\n    default:\r\n      return [];\r\n  }\r\n};\r\n\r\nconst checkCellOnHole = (cell: CellType, direction: MoveDirection) => {\r\n  if (cell.name === \"commonCell\") {\r\n    if (direction === \"left\" || direction === \"bottom\") {\r\n      const cellHasWindow = cell.barrierList?.find(\r\n        (barrier) => barrier.name === \"window\"\r\n      )\r\n        ? true\r\n        : false;\r\n      const cellHasDoor = cell.barrierList?.find(\r\n        (barrier) => barrier.name === \"door\"\r\n      )\r\n        ? true\r\n        : false;\r\n      const cellHasHole = cellHasWindow || cellHasDoor;\r\n      return cellHasHole;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n  return false;\r\n};\r\n\r\nconst getOppositeDirection = (direction: MoveDirection): MoveDirection => {\r\n  switch (direction) {\r\n    case \"top\": {\r\n      return \"bottom\";\r\n    }\r\n    case \"bottom\": {\r\n      return \"top\";\r\n    }\r\n    case \"left\": {\r\n      return \"right\";\r\n    }\r\n    case \"right\": {\r\n      return \"left\";\r\n    }\r\n  }\r\n};\r\n","import styled from \"styled-components\";\r\n\r\nimport {\r\n  GameField,\r\n  PlayerListType,\r\n  EnemyListType,\r\n  CommonCell,\r\n  MoveDirection,\r\n  AvailableCellListType,\r\n  CellType,\r\n  AvailableCellType,\r\n  State,\r\n  GameState,\r\n} from \"../../business/types\";\r\n\r\nimport { getCards } from \"./getCards\";\r\nimport { getPlayersList } from \"./getPlayersList\";\r\nimport { getEnemyList } from \"./getEnemyList\";\r\nimport { Barrier } from \"./Barrier\";\r\n\r\nimport { MOVE_DIRECTION_LIST } from \"../../shared/config\";\r\n\r\ntype CellApperance = {\r\n  hasMarker?: boolean;\r\n};\r\n\r\nconst Wrap = styled.div`\r\n  position: relative;\r\n`;\r\n\r\nconst CellItem = styled.div<CellApperance>`\r\n  position: relative;\r\n  box-sizing: border-box;\r\n  border: 1px solid lightgray;\r\n  font-size: 14px;\r\n  text-align: right;\r\n  width: 50px;\r\n  height: 50px;\r\n  color: lightgrey;\r\n  background-color: ${(props) => {\r\n    if (props.hasMarker) {\r\n      return \" rgb(241, 224, 224)\";\r\n    }\r\n  }};\r\n`;\r\n\r\nexport const getFilledPlayGrid = (state: State, getContextMenu: Function) => {\r\n  const { gameField, playerList, numberOfPlayer, gameState, enemyList } = state;\r\n  const orderGameCells = gameField.order;\r\n\r\n  const currPlayerCoord = playerList[numberOfPlayer].coord;\r\n\r\n  const availableCells = state.availableCellsCoords?.concat(currPlayerCoord);\r\n\r\n  const fullPlayerGrid = orderGameCells.map((orderIndex: string) => {\r\n    const cellValues = gameField.values[orderIndex];\r\n    const [hor, vert] = orderIndex.split(\".\");\r\n\r\n    const hasMarker = availableCells?.includes(orderIndex);\r\n    return (\r\n      <Wrap key={`${hor}.${vert}`}>\r\n        <CellItem hasMarker={hasMarker}>\r\n          {getCards(cellValues)}\r\n          {getPlayersList(\r\n            orderIndex,\r\n            playerList,\r\n            numberOfPlayer,\r\n            getContextMenu\r\n          )}\r\n          {cellValues.name === \"commonCell\"\r\n            ? getEnemyList(orderIndex, enemyList)\r\n            : null}\r\n          {`${hor}.${vert}`}\r\n        </CellItem>\r\n        {cellValues.name === \"commonCell\" ? (\r\n          <Barrier orderIndex={orderIndex}></Barrier>\r\n        ) : null}\r\n      </Wrap>\r\n    );\r\n  });\r\n\r\n  return fullPlayerGrid;\r\n};\r\n","import { useDispatch, useSelector } from \"react-redux\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\nimport styled from \"styled-components\";\r\n\r\nimport { FINISH_COORD } from \"../../shared/config\";\r\nimport { State } from \"../../business/types\";\r\n\r\nimport { getFilledPlayGrid } from \"./getFilledPlayGrid\";\r\n\r\ntype GridProps = {\r\n  vert: number;\r\n  type: \"visible\" | \"hidden\";\r\n};\r\n\r\ntype ContextMenuType = {\r\n  type: \"visible\" | \"hidden\";\r\n  coord?: { x?: number; y?: number };\r\n};\r\n\r\ntype WrapType = {};\r\n\r\nconst GridItem = styled.div<GridProps>`\r\n  outline: 2px solid lightgray;\r\n  margin: 0 auto;\r\n  width: 100%;\r\n  transform: rotate(270deg);\r\n  display: grid;\r\n  grid-column-start: -1;\r\n  //параметризирую по ширине поля\r\n  grid-template-columns: ${(props) => {\r\n    return `repeat(${props.vert} ,50px)`;\r\n  }};\r\n\r\n  grid-gap: 0px;\r\n  > * {\r\n    transform: rotate(90deg);\r\n  }\r\n`;\r\n\r\nconst ContextMenu = styled.div<ContextMenuType>`\r\n  display: ${(props) => {\r\n    if (props.type === \"visible\") {\r\n      return \"block\";\r\n    } else {\r\n      return \"none\";\r\n    }\r\n  }};\r\n  flex-direction: column;\r\n  position: absolute;\r\n  width: 100px;\r\n  height: 100px;\r\n  background-color: #ffffff;\r\n  box-shadow: 0 0 10px rgb(0 0 0 / 50%);\r\n  justify-content: start;\r\n  padding: 21px 0 0 12px;\r\n  box-sizing: border-box;\r\n  left: ${(props) => {\r\n    if (props.coord?.x) {\r\n      return `${props.coord?.x + 50}px`;\r\n    } else {\r\n      return \"0px\";\r\n    }\r\n  }};\r\n  top: ${(props) => {\r\n    return `${props.coord?.y}px`;\r\n  }};\r\n`;\r\n\r\nconst Button = styled.button`\r\n  height: 30px;\r\n  width: 70px;\r\n`;\r\n\r\nexport const PlayGrid = () => {\r\n  const dispatch = useDispatch();\r\n  const state = useSelector((state: State) => ({\r\n    ...state,\r\n  }));\r\n\r\n  type contextMenuType = {\r\n    type: \"visible\" | \"hidden\";\r\n    playerNumber?: Number;\r\n    coord?: { x?: number; y?: number };\r\n  };\r\n\r\n  const initialContextMenuState: contextMenuType = { type: \"hidden\" };\r\n\r\n  const [contextMenuState, updatecontextMenuState] = useState(\r\n    initialContextMenuState\r\n  );\r\n\r\n  const { gameField, playerList, enemyList, numberOfPlayer } = state;\r\n\r\n  const { vert: maxVert } = FINISH_COORD;\r\n  const height = maxVert + 1;\r\n  const playerEl = document.getElementById(`player${numberOfPlayer}`);\r\n  const playerCoord = {\r\n    x: playerEl?.getBoundingClientRect().x,\r\n    y: playerEl?.getBoundingClientRect().y,\r\n  };\r\n\r\n  const getContextMenu = (numberOfPlayer: number) => {\r\n    updatecontextMenuState({\r\n      type: \"visible\",\r\n      playerNumber: numberOfPlayer,\r\n      coord: playerCoord,\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    switch (contextMenuState.type) {\r\n      case \"visible\": {\r\n        const bodyElement = document.querySelector(\"body\");\r\n\r\n        const callback = (e: MouseEvent) => {\r\n          /**\r\n           * Its for avoiding event on currentPlayer\r\n           */\r\n          if (\r\n            e.target ===\r\n            document.getElementById(`player${state.numberOfPlayer}`)\r\n          ) {\r\n            e.stopPropagation();\r\n          }\r\n\r\n          updatecontextMenuState((prevState) => {\r\n            return { ...prevState, type: \"hidden\" };\r\n          });\r\n\r\n          bodyElement?.removeEventListener(\"click\", callback, {\r\n            capture: true,\r\n          });\r\n        };\r\n\r\n        bodyElement?.addEventListener(\"click\", callback, {\r\n          capture: true,\r\n        });\r\n\r\n        return () => {\r\n          bodyElement?.removeEventListener(\"click\", callback, {\r\n            capture: true,\r\n          });\r\n        };\r\n      }\r\n\r\n      default:\r\n        break;\r\n    }\r\n  }, [contextMenuState.type]);\r\n\r\n  return (\r\n    <>\r\n      <GridItem vert={height} type={contextMenuState.type}>\r\n        {getFilledPlayGrid(state, getContextMenu)}\r\n      </GridItem>\r\n      <ContextMenu\r\n        type={contextMenuState.type}\r\n        id={\"contextMenu\"}\r\n        className={\"contextMenu\"}\r\n        coord={contextMenuState.coord}\r\n      >\r\n        <Button\r\n          className={\"contextMenu\"}\r\n          onClick={() => {\r\n            dispatch({\r\n              type: \"req-shareCard\",\r\n              payload: contextMenuState.playerNumber,\r\n            });\r\n          }}\r\n        >\r\n          передать\r\n        </Button>\r\n        <Button\r\n          onClick={() => {\r\n            dispatch({\r\n              type: \"req-healPlayer\",\r\n              payload: contextMenuState.playerNumber,\r\n            });\r\n          }}\r\n        >\r\n          лечить\r\n        </Button>\r\n      </ContextMenu>\r\n    </>\r\n  );\r\n};\r\n","import { useSelector } from \"react-redux\";\r\n\r\nimport styled from \"styled-components\";\r\n\r\nimport { State, PlayerListType } from \"../business/types\";\r\n\r\nimport { AMOUNT_PLAYERS, MAX_HEALTH_AMOUNT } from \"../shared/config\";\r\n\r\ntype HealthSlotType = {\r\n  isFilled: boolean;\r\n};\r\n\r\nconst HealthSlotList = styled.div`\r\n  display: flex;\r\n  align-items: center;\r\n`;\r\nconst HealthSlot = styled.div<HealthSlotType>`\r\n  width: 5px;\r\n  height: 5px;\r\n  border-radius: 50%;\r\n  border: 1px solid #f09292;\r\n  margin: 1px;\r\n  background-color: ${(props) => {\r\n    if (props.isFilled) {\r\n      return \"#f09292\";\r\n    } else return \"none\";\r\n  }};\r\n`;\r\n\r\nexport const HealthSlots = (props: { index: number }) => {\r\n  const { playerList } = useSelector((state: State) => ({\r\n    ...state,\r\n  }));\r\n\r\n  return (\r\n    <HealthSlotList>\r\n      {getHealthSlot(playerList, props.index).map(\r\n        (healthSlotFilled: boolean, index: number) => {\r\n          return (\r\n            <HealthSlot key={index} isFilled={healthSlotFilled}></HealthSlot>\r\n          );\r\n        }\r\n      )}\r\n    </HealthSlotList>\r\n  );\r\n};\r\n\r\nconst getHealthSlot = (playerList: PlayerListType, index: number) => {\r\n  const playerHealth = getPlayerHealth(playerList, index);\r\n  const maxHealthSlotList = new Array(MAX_HEALTH_AMOUNT).fill(0);\r\n\r\n  const filledHealthSlotList = maxHealthSlotList.reduce(\r\n    (prev, currSlot, index) => {\r\n      if (index < playerHealth) {\r\n        return [...prev, true];\r\n      } else {\r\n        return [...prev, false];\r\n      }\r\n    },\r\n    []\r\n  );\r\n  return filledHealthSlotList;\r\n};\r\n\r\nconst getPlayerHealth = (\r\n  playersList: PlayerListType,\r\n  numberOfPlayer: number\r\n) => {\r\n  return playersList[numberOfPlayer].health;\r\n};\r\n","import { useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\n\r\nimport styled from \"styled-components\";\r\n\r\nimport {\r\n  State,\r\n  PlayerListType,\r\n  HealthCardType,\r\n  GameState,\r\n  CardItem,\r\n} from \"../business/types\";\r\nimport { Health } from \"./Health\";\r\nimport { BoardsCard } from \"./BoardsCard\";\r\n\r\ntype SlotType = {\r\n  onClick: Function;\r\n  highlighting?: boolean;\r\n};\r\n\r\nconst InventoryWrap = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n  flex-wrap: wrap;\r\n  align-content: flex-start;\r\n`;\r\n\r\nconst Slot = styled.div<SlotType>`\r\n  display: flex;\r\n\r\n  & > * {\r\n    margin: 2px;\r\n    position: relative;\r\n    /*  box-sizing: border-box; */\r\n  }\r\n\r\n  outline: ${(props) => {\r\n    if (props.highlighting === true) {\r\n      return \"1px solid red \";\r\n    }\r\n  }};\r\n`;\r\n\r\nexport const Inventory = (props: { index: number }) => {\r\n  const dispatch = useDispatch();\r\n  const { playerList, gameState } = useSelector((state: State) => ({\r\n    ...state,\r\n  }));\r\n\r\n  const inventory = playerList[props.index].inventory;\r\n  return (\r\n    <InventoryWrap>\r\n      {inventory.map((inventoryCard, inventoryCardindex) => {\r\n        return (\r\n          <Slot\r\n            key={inventoryCardindex}\r\n            highlighting={inventoryCard?.isSelected}\r\n            onClick={() => {\r\n              dispatch({\r\n                type: \"cardChoosed\",\r\n                payload: inventoryCardindex,\r\n              });\r\n            }}\r\n          >\r\n            {getChildrenComponent(inventoryCard)}\r\n          </Slot>\r\n        );\r\n      })}\r\n    </InventoryWrap>\r\n  );\r\n};\r\n\r\nconst getChildrenComponent = (inventoryCard: CardItem) => {\r\n  switch (inventoryCard?.name) {\r\n    case \"health\": {\r\n      return <Health />;\r\n    }\r\n    case \"boards\": {\r\n      return <BoardsCard />;\r\n    }\r\n    default: {\r\n      return null;\r\n    }\r\n  }\r\n};\r\n","import { useSelector } from \"react-redux\";\r\n\r\nimport styled from \"styled-components\";\r\n\r\nimport { State, PlayerListType } from \"../business/types\";\r\n\r\nimport { MAX_HEALTH_AMOUNT } from \"../shared/config\";\r\nimport { HealthSlots } from \"../components/HealthSlots\";\r\nimport { Inventory } from \"../components/Inventory\";\r\n\r\ntype HealthSlotType = {\r\n  isFilled: boolean;\r\n};\r\n\r\nconst PlayerStatusCard = styled.div`\r\n  width: 250px;\r\n  height: 200px;\r\n  border: 1px solid lightgray;\r\n  padding: 10px;\r\n  box-sizing: border-box;\r\n  display: flex;\r\n  justify-content: space-between;\r\n`;\r\n\r\nconst CharacterAvatar = styled.div`\r\n  width: 50px;\r\n  height: 70px;\r\n  border: 1px solid lightgray;\r\n  font-size: 14px;\r\n  text-align: center;\r\n`;\r\n\r\nconst Status = styled.div`\r\n  display: flex;\r\n  border: 1px solid lightgray;\r\n\r\n  padding: 3px;\r\n  margin-bottom: 15px;\r\n  font-size: 14px;\r\n  width: 150px;\r\n`;\r\n\r\nconst HealthStatus = styled(Status)`\r\n  height: 20px;\r\n`;\r\n\r\nconst InventoryStatus = styled(Status)`\r\n  height: 100px;\r\n`;\r\n\r\nconst Column = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n`;\r\nexport const PlayerStatus = () => {\r\n  const { numberOfPlayer } = useSelector((state: State) => ({\r\n    ...state,\r\n  }));\r\n\r\n  // TODO: why pass the index?\r\n  return (\r\n    <PlayerStatusCard>\r\n      <Column>\r\n        <CharacterAvatar>игрок {`${numberOfPlayer + 1}`}</CharacterAvatar>\r\n      </Column>\r\n      <Column>\r\n        <HealthStatus>\r\n          {`здоровье:  `}\r\n          <HealthSlots index={numberOfPlayer}></HealthSlots>\r\n        </HealthStatus>\r\n        <InventoryStatus>\r\n          {`предметы:  `}\r\n          <Inventory index={numberOfPlayer} />\r\n        </InventoryStatus>\r\n      </Column>\r\n    </PlayerStatusCard>\r\n  );\r\n};\r\n","import { useSelector } from \"react-redux\";\r\n\r\nimport styled from \"styled-components\";\r\n\r\nimport {\r\n  State,\r\n  GameState,\r\n  TypeEffect,\r\n  PlayerListType,\r\n} from \"../business/types\";\r\n\r\nimport { PlayerStatus } from \"./PlayerStatus\";\r\nimport { PlayersStatusList } from \"./PlayersStatusList\";\r\n\r\nconst Status = styled.div`\r\n  width: 200px;\r\n  min-height: 18px;\r\n  width: 250px;\r\n  height: 60px;\r\n  border: 1px solid lightgray;\r\n  background-color: #fff2d9;\r\n  text-align: center;\r\n  font-size: 20px;\r\n  color: #5f5757;\r\n  padding-top: 15px;\r\n  box-sizing: border-box;\r\n`;\r\n\r\nexport const StatusList = () => {\r\n  const { dice, playerList, gameState, doEffect, gameResult } = useSelector(\r\n    (state: State) => ({\r\n      ...state,\r\n    })\r\n  );\r\n  return (\r\n    <>\r\n      <Status>{getTextStatus(gameState, doEffect, dice, gameResult)}</Status>\r\n      <PlayerStatus />\r\n      {/*    <PlayersStatusList /> */}\r\n    </>\r\n  );\r\n};\r\n\r\nconst getTextStatus = (\r\n  gameState: GameState,\r\n  doEffect: TypeEffect,\r\n  dice: number,\r\n  gameResult: string\r\n) => {\r\n  switch (gameState.type) {\r\n    case \"gameStarted.trownDice\":\r\n      return \"бросить кубик\";\r\n    case \"gameStarted.playerMove\":\r\n      return \"сделать ход\";\r\n    case \"gameStarted.takeCard\":\r\n      return \"открываем карточку\";\r\n    case \"gameStarted.applyCard\":\r\n      return \"применить карточку\";\r\n    case \"gameStarted.interactEnemyCard\":\r\n      switch (doEffect?.type) {\r\n        case \"!openEnemyCard\": {\r\n          return \"открываем карточку\";\r\n        }\r\n        case \"!throwBattleDice\": {\r\n          return \"pежим боя: бросить кубик\";\r\n        }\r\n        case \"!getBattleResult\": {\r\n          switch (dice) {\r\n            case 1:\r\n            case 2: {\r\n              return `выпало ${dice}: игрок спасается бегством `;\r\n            }\r\n            case 3: {\r\n              return `выпало ${dice}: игрок теряет 1 здоровье`;\r\n            }\r\n            case 4: {\r\n              return `выпало ${dice}: враг побежден`;\r\n            }\r\n            default:\r\n              return \" \";\r\n          }\r\n        }\r\n        default:\r\n          return \" \";\r\n      }\r\n\r\n    case \"endGame\":\r\n      return gameResult;\r\n    default:\r\n      return \" \";\r\n  }\r\n};\r\n","import React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\nimport styled from \"styled-components\";\r\n\r\nimport { State, PlayerListType } from \"../business/types\";\r\n\r\nimport { AMOUNT_PLAYERS, MAX_HEALTH_AMOUNT } from \"../shared/config\";\r\nimport { HealthSlots } from \"../components/HealthSlots\";\r\nimport { Inventory } from \"../components/Inventory\";\r\n\r\ntype HealthSlotType = {\r\n  isFilled: boolean;\r\n};\r\n\r\ntype AmountOfPlayers = {\r\n  amount: number;\r\n};\r\n\r\nconst PlayersListWrap = styled.div<AmountOfPlayers>`\r\n  width: 130px;\r\n  height: 100px;\r\n  /*   border: 1px solid lightgray; */\r\n  display: grid;\r\n\r\n  grid-template-rows: 20% auto auto;\r\n  grid-template-columns: ${(props) => {\r\n    return `repeat(${props.amount} ,25px)`;\r\n  }};\r\n  pointer-events: none;\r\n`;\r\n\r\nconst CharacterAvatar = styled.div`\r\n  font-size: 12px;\r\n  text-align: center;\r\n  grid-row-start: 1;\r\n  grid-row-end: 2;\r\n`;\r\n\r\nconst HealthSlotsWrap = styled.div`\r\n  grid-row-start: 2;\r\n  grid-row-end: 3;\r\n  & > * {\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    flex-direction: column;\r\n    width: 100%;\r\n  }\r\n`;\r\n\r\nconst InventorysWrap = styled.div`\r\n  grid-row-start: 3;\r\n  grid-row-end: 4;\r\n  & * {\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    flex-direction: column;\r\n    box-sizing: border-box;\r\n    outline: none;\r\n    /*  & > * {\r\n      box-sizing: border-box;\r\n    } */\r\n  }\r\n`;\r\n\r\nexport const PlayersStatusList = () => {\r\n  return (\r\n    <PlayersListWrap amount={AMOUNT_PLAYERS}>\r\n      {new Array(AMOUNT_PLAYERS).fill(0).map((player, index) => {\r\n        return (\r\n          <React.Fragment key={index}>\r\n            <CharacterAvatar>{`${index + 1}`}</CharacterAvatar>\r\n            <HealthSlotsWrap>\r\n              <HealthSlots index={index}></HealthSlots>\r\n            </HealthSlotsWrap>\r\n            <InventorysWrap>\r\n              <Inventory index={index} />\r\n            </InventorysWrap>\r\n          </React.Fragment>\r\n        );\r\n      })}\r\n    </PlayersListWrap>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\nimport styled from \"styled-components\";\r\n\r\nimport { State } from \"../business/types\";\r\n\r\nconst GameScore = styled.div`\r\n  margin: 100px;\r\n`;\r\n\r\nexport const EndScreen = () => {\r\n  const gameResult = useSelector((state: State) => state.gameResult);\r\n  return (\r\n    <>\r\n      <GameScore>Игра окончена. {gameResult}</GameScore>\r\n    </>\r\n  );\r\n};\r\n","import { useDispatch } from \"react-redux\";\r\n\r\nimport styled from \"styled-components\";\r\n\r\nconst StartButton = styled.button`\r\n  height: 22px;\r\n  margin: 140px;\r\n`;\r\n\r\nexport const StartScreen = () => {\r\n  const dispatch = useDispatch();\r\n  return (\r\n    <>\r\n      <StartButton\r\n        onClick={() => {\r\n          dispatch({ type: \"clickedStartButton\" });\r\n        }}\r\n      >\r\n        {\" \"}\r\n        начать игру\r\n      </StartButton>\r\n    </>\r\n  );\r\n};\r\n","import {\r\n  StartCell,\r\n  CommonCell,\r\n  FinishCell,\r\n  GameFieldCells,\r\n  CellType,\r\n} from \"../../types\";\r\n\r\nimport {\r\n  FINISH_COORD,\r\n  START_COORD,\r\n  CELLS_BARRIERS_LIST,\r\n} from \"../../../shared/config\";\r\n\r\n/**\r\n *  Returns an object with start and finish  in structure of GameValues.\r\n */\r\nexport const getFieldCells = (cellList: string[]): GameFieldCells => {\r\n  const emptyFieldCells = createEmptyFieldCells(cellList);\r\n  const fieldCellsWithWalls = getCellsWalls(emptyFieldCells);\r\n  const organizedFieldCells = getOrganizedFieldCells(fieldCellsWithWalls);\r\n  return organizedFieldCells;\r\n};\r\n\r\n/**\r\n * Creates an object with keys and empty cells in structure of GameValues.\r\n */\r\nconst createEmptyFieldCells = (cellList: Array<string>): GameFieldCells => {\r\n  const emptyFieldItem: CommonCell = {\r\n    name: \"commonCell\",\r\n    cardItem: [],\r\n  };\r\n\r\n  let newEmptyGameField: GameFieldCells = {};\r\n\r\n  cellList.forEach((cell: string) => {\r\n    newEmptyGameField[cell] = emptyFieldItem;\r\n  });\r\n\r\n  return newEmptyGameField;\r\n};\r\n\r\n/**\r\n *  Creates an object with start, finish and walls in structure of GameValues.\r\n */\r\nconst getOrganizedFieldCells = (emptyField: GameFieldCells): GameFieldCells => {\r\n  const startIndex = `${START_COORD.hor}.${START_COORD.vert}`;\r\n  const finishIndex = `${FINISH_COORD.hor}.${FINISH_COORD.vert}`;\r\n\r\n  const startCell: StartCell = {\r\n    name: \"start\",\r\n    cardItem: [],\r\n  };\r\n\r\n  const finishCell: FinishCell = {\r\n    name: \"finish\",\r\n    cardItem: [],\r\n  };\r\n\r\n  const organizedGameFieldCells = {\r\n    ...emptyField,\r\n    [startIndex]: startCell,\r\n    [finishIndex]: finishCell,\r\n  };\r\n\r\n  return organizedGameFieldCells;\r\n};\r\n\r\n/**\r\n * @returns The object in structure GameFieldCells. With walls(barriers) in cells.\r\n */\r\nconst getCellsWalls = (emptyField: GameFieldCells): GameFieldCells => {\r\n  // TODO: Need add checking for CommonCell?\r\n\r\n  /**\r\n   * Returns list of Cells with walls(barriers)\r\n   */\r\n  const cellsWithBarrierList = CELLS_BARRIERS_LIST.map((cellBarrier): [\r\n    string,\r\n    CellType\r\n  ] => {\r\n    const { coord, barrierList } = cellBarrier;\r\n    const cellIndex = `${coord.hor}.${coord.vert}`;\r\n\r\n    const cellWithoutBarrier = emptyField[cellIndex];\r\n\r\n    if (cellWithoutBarrier.name === \"commonCell\") {\r\n      const cellWithBarrier = {\r\n        ...cellWithoutBarrier,\r\n        barrierList: barrierList,\r\n      };\r\n\r\n      return [cellIndex, cellWithBarrier];\r\n    } else {\r\n      return [cellIndex, cellWithoutBarrier];\r\n    }\r\n  });\r\n\r\n  const cellsWithBarriers: GameFieldCells =\r\n    Object.fromEntries(cellsWithBarrierList);\r\n\r\n  const fieldCellsWithWalls = { ...emptyField, ...cellsWithBarriers };\r\n  return fieldCellsWithWalls;\r\n};\r\n","import { CommonCell, GameFieldCells, CardItem } from \"../../types\";\r\n\r\nimport {\r\n  AMOUNT_HEALTH_ITEMS,\r\n  AMOUNT_BOARDS_ITEMS,\r\n  APPERANCE_CARD,\r\n} from \"../../../shared/config\";\r\n\r\ntype CardSet = {\r\n  card: CardItem;\r\n  amount: number;\r\n};\r\n\r\nconst cardsList: CardSet[] = [\r\n  {\r\n    card: {\r\n      name: \"health\",\r\n      apperance: APPERANCE_CARD,\r\n    },\r\n    amount: AMOUNT_HEALTH_ITEMS,\r\n  },\r\n  {\r\n    card: {\r\n      name: \"boards\",\r\n      apperance: APPERANCE_CARD,\r\n    },\r\n    amount: AMOUNT_BOARDS_ITEMS,\r\n  },\r\n];\r\n\r\n/**\r\n * Returns an object in structure of FieldCells with spreaded cards in random picked cells.\r\n */\r\nexport const spreadCards = (gameFieldCells: GameFieldCells): GameFieldCells => {\r\n  /**\r\n   * filledСells - its object with filling cells\r\n   * currCardSet -curr set of cards\r\n   * from cardset making object with cards\r\n   */\r\n  const cellsWithAllCards = cardsList.reduce((filledСells, currCardSet) => {\r\n    const gameFieldCellsWithPrevios = { ...gameFieldCells, ...filledСells };\r\n\r\n    const cellsForCards = getListForCards(\r\n      gameFieldCellsWithPrevios,\r\n      filledСells,\r\n      currCardSet\r\n    );\r\n\r\n    /**\r\n     * Adding filled with previos cardSet cells\r\n     */\r\n    const filledWithCardsFieldCells = setCards(cellsForCards, currCardSet);\r\n    const filledWithAllCardsCells = {\r\n      ...filledСells,\r\n      ...filledWithCardsFieldCells,\r\n    };\r\n    return filledWithAllCardsCells;\r\n  }, {});\r\n\r\n  const gameFieldFull = { ...gameFieldCells, ...cellsWithAllCards };\r\n  return gameFieldFull;\r\n};\r\n\r\n/**\r\n *  Creates an object with spreaded cards into cells from cellsForCards.\r\n */\r\nconst setCards = (\r\n  cellList: [string, CommonCell][],\r\n  currCardSet: CardSet\r\n): GameFieldCells => {\r\n  const cellListWithCards = cellList.map(\r\n    (cellWithCards: [string, CommonCell]) => {\r\n      const [index, cell] = cellWithCards;\r\n\r\n      const cellWithCard: CommonCell = {\r\n        ...cell,\r\n        cardItem: [currCardSet.card],\r\n      };\r\n      return [index, cellWithCard];\r\n    }\r\n  );\r\n\r\n  const fieldCellsWithCards = Object.fromEntries(cellListWithCards);\r\n\r\n  return fieldCellsWithCards;\r\n};\r\n\r\n/**\r\n * Returns an array with random empty cell witch suitable for healthCard.\r\n * Array lenght is equal AMOUNT_..._ITEMS.\r\n */\r\nconst getListForCards = (\r\n  gameField: GameFieldCells,\r\n  filledСells: GameFieldCells,\r\n  currCardSet: CardSet\r\n): [string, CommonCell][] => {\r\n  const listGameField = Object.entries(gameField);\r\n\r\n  /**\r\n   * This array contains only empty cells\r\n   */\r\n  const emptyCellsList = listGameField.filter((cellItem): cellItem is [\r\n    string,\r\n    CommonCell\r\n  ] => {\r\n    const [, item] = cellItem;\r\n\r\n    return item.name === \"commonCell\" && item.cardItem.length === 0;\r\n  });\r\n\r\n  const AMOUNT_EMPTY_CELLS = emptyCellsList.length;\r\n  const amoutCurrentCards = currCardSet.amount;\r\n\r\n  /**\r\n   * Is a list with number of indexes of empty cells.\r\n   */\r\n  const keyList: Array<number> = new Array(amoutCurrentCards)\r\n    .fill(0)\r\n    .reduce((prevkeyList) => {\r\n      const randomNumber = getRandomNumber(prevkeyList, AMOUNT_EMPTY_CELLS);\r\n\r\n      if (prevkeyList) {\r\n        return [...prevkeyList, randomNumber];\r\n      } else {\r\n        return [randomNumber];\r\n      }\r\n    }, []);\r\n\r\n  const listForCards = keyList.map((keyItem: number): [string, CommonCell] => {\r\n    return emptyCellsList[keyItem];\r\n  });\r\n\r\n  return listForCards;\r\n};\r\n\r\n/**\r\n * Gets an array with the previously selected random numbers and the maximum number to select.\r\n * Returns a random number satisfying the conditions.\r\n */\r\nconst getRandomNumber = (\r\n  arrNumber: Array<number>,\r\n  maxNumber: number\r\n): number => {\r\n  const number = Math.floor(Math.random() * maxNumber);\r\n\r\n  if (arrNumber) {\r\n    return arrNumber.includes(number)\r\n      ? getRandomNumber(arrNumber, maxNumber)\r\n      : number;\r\n  } else {\r\n    return number;\r\n  }\r\n};\r\n","import { FINISH_COORD } from \"../../../shared/config\";\r\nimport { getFieldCells} from \"./getFieldCells\";\r\n/* import { spreadHealthCards } from \"./spreadHealthCards\"; */\r\nimport { spreadCards } from \"./spreadCards\";\r\n\r\n//TODO: Need add some config object for all cards and spreading them simultaneously.\r\nexport const getGameField = () => {\r\n  const order = getCellOrder();\r\n  const gameFieldCells = getFieldCells(order);\r\n  const filledWithCardsCells = spreadCards(gameFieldCells);\r\n  const gameField = { order, values: filledWithCardsCells };\r\n  return gameField;\r\n};\r\n\r\n/**\r\n * Creates an array with cell index order.\r\n */\r\nconst getCellOrder = (): Array<string> => {\r\n  const width = FINISH_COORD.hor;\r\n  const height = FINISH_COORD.vert;\r\n\r\n  let orderList: Array<string> = [];\r\n\r\n  for (let hor = 0; hor <= width; hor++) {\r\n    for (let vert = 0; vert <= height; vert++) {\r\n      const index: string = `${hor}.${vert}`;\r\n      orderList.push(index);\r\n    }\r\n  }\r\n\r\n  return orderList;\r\n};\r\n","import { PlayerListType } from \"../types\";\r\n\r\nimport {\r\n  AMOUNT_PLAYERS,\r\n  INITIAL_PLAYER_HEALTH,\r\n  START_COORD,\r\n} from \"../../shared/config\";\r\n\r\nexport const getPlayers = (): PlayerListType => {\r\n  const startCoord = `${START_COORD.hor}.${START_COORD.vert}`;\r\n  const playersList = new Array(AMOUNT_PLAYERS).fill(0).map((player, index) => {\r\n    const playerCard = {\r\n      name: \"player\",\r\n      health: INITIAL_PLAYER_HEALTH,\r\n      orderNumber: index,\r\n      coord: startCoord,\r\n      inventory: [],\r\n    };\r\n    return [index, playerCard];\r\n  });\r\n\r\n  const playersObj: PlayerListType = Object.fromEntries(playersList);\r\n  return playersObj;\r\n};\r\n","import { EnemyListType, GameField, CommonCell, CellType } from \"../types\";\r\n\r\nimport { AMOUNT_ENEMIES, APPERANCE_CARD } from \"../../shared/config\";\r\n\r\nexport const getEnemies = (gameField: GameField): EnemyListType => {\r\n  const emptyCellsList = getEmptyList(gameField);\r\n  const enemiesCoords = getListOfIndexes(emptyCellsList);\r\n  const enemiesObj = getListOfEnemy(enemiesCoords);\r\n  return enemiesObj;\r\n};\r\n\r\n/**\r\n * For every element checks that cell has no cards on it.\r\n * Returns the list of cells without any cards.\r\n */\r\nconst getEmptyList = (gameField: GameField): [string, CommonCell][] => {\r\n  const listCells = Object.entries(gameField.values);\r\n  const emptyCellsList = listCells.filter((cellItem): cellItem is [\r\n    string,\r\n    CommonCell\r\n  ] => {\r\n    const [, item] = cellItem;\r\n    return item.name === \"commonCell\" && item.cardItem.length === 0;\r\n  });\r\n  return emptyCellsList;\r\n};\r\n\r\n/**\r\n * Returns the list of random picked indexes of emptyCellsList\r\n */\r\nconst getListOfIndexes = (emptyCellsList: [string, CommonCell][]) => {\r\n  const AMOUNT_EMPTY_CELLS = emptyCellsList.length;\r\n\r\n  // TODO: it may be taking out as separate module with getRandomNumber?\r\n  const keyList: Array<number> = new Array(AMOUNT_ENEMIES)\r\n    .fill(0)\r\n    .reduce((prevkeyList) => {\r\n      const randomNumber = getRandomNumber(prevkeyList, AMOUNT_EMPTY_CELLS);\r\n\r\n      if (prevkeyList) {\r\n        return [...prevkeyList, randomNumber];\r\n      } else {\r\n        return [randomNumber];\r\n      }\r\n    }, []);\r\n\r\n  const idexesListForCards = keyList.map((keyItem: number): string => {\r\n    const [index] = emptyCellsList[keyItem];\r\n    return index;\r\n  });\r\n\r\n  return idexesListForCards;\r\n};\r\n\r\n/**\r\n * Returns the object of all enemies\r\n */\r\nconst getListOfEnemy = (enemiesCoords: string[]) => {\r\n  const enemyList = enemiesCoords.map((coord) => {\r\n    const enemyCard = {\r\n      name: \"enemy\",\r\n      power: 1,\r\n      coord: coord,\r\n      apperance: APPERANCE_CARD,\r\n    };\r\n    return [enemyCard.coord, enemyCard];\r\n  });\r\n\r\n  const enemiesObj: EnemyListType = Object.fromEntries(enemyList);\r\n  return enemiesObj;\r\n};\r\n\r\n/**\r\n * Gets an array with the previously selected random numbers and the maximum number to select.\r\n * Returns a random number satisfying the conditions.\r\n */\r\nconst getRandomNumber = (\r\n  arrNumber: Array<number>,\r\n  maxNumber: number\r\n): number => {\r\n  const number = Math.floor(Math.random() * maxNumber);\r\n\r\n  if (arrNumber) {\r\n    return arrNumber.includes(number)\r\n      ? getRandomNumber(arrNumber, maxNumber)\r\n      : number;\r\n  } else {\r\n    return number;\r\n  }\r\n};\r\n","import { State } from \"../types\";\r\n\r\nimport { getGameField } from \"./getGameField\";\r\nimport { getPlayers } from \"./getPlayers\";\r\nimport { getEnemies } from \"./getEnemies\";\r\n\r\nconst getInitialState = (): State => {\r\n  //отдаем gameFieldWithoutEnemy для рандомного выбора координат врагов из пустых ячеек\r\n  const gameFieldWithoutEnemy = getGameField();\r\n\r\n  return {\r\n    gameState: { type: \"waitingStart\" },\r\n    dice: 0,\r\n    gameResult: \"\",\r\n    playerList: getPlayers(),\r\n    enemyList: getEnemies(gameFieldWithoutEnemy),\r\n    gameField: gameFieldWithoutEnemy,\r\n    doEffect: null,\r\n    numberOfPlayer: 0,\r\n  };\r\n};\r\n\r\nexport const initialState = getInitialState();\r\n","import { State } from \"../../types\";\r\nimport { ActionType } from \"../../reducer\";\r\n\r\nexport const waitingStart = (action: ActionType, state: State): State => {\r\n  switch (action.type) {\r\n    case \"clickedStartButton\": {\r\n      return {\r\n        ...state,\r\n        gameState: {\r\n          type: \"gameStarted.trownDice\",\r\n        },\r\n      };\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { State, PlayerListType, MoveDirection, CellType } from \"../../../types\";\r\n\r\nimport { checkCellHasWall } from \"../common/checkCellHasWall\";\r\n/** Cheking the cases when can't take the cell. In default we think that can. */\r\nexport const checkCanTakeCell = (\r\n  state: State,\r\n  nextPlayerCoord: string,\r\n  direction: MoveDirection\r\n) => {\r\n  const { playerList, dice } = state;\r\n  const metBarrier = checkCellHasWall(state, nextPlayerCoord, direction);\r\n  const isLastStepOfMove = dice === 1;\r\n  const isNextCellOcupied = checkNextCellOccupied(playerList, nextPlayerCoord);\r\n  const canNotTakeCell = isLastStepOfMove && isNextCellOcupied;\r\n\r\n  switch (true) {\r\n    case metBarrier: {\r\n      return false;\r\n    }\r\n\r\n    case canNotTakeCell: {\r\n      // TODO: можно сделать промежуточное состояние для статуса с предупреждением о занятой чейке\r\n      return false;\r\n    }\r\n    default: {\r\n      return true;\r\n    }\r\n  }\r\n};\r\n\r\nconst checkNextCellOccupied = (\r\n  playersList: PlayerListType,\r\n  newCoord: string\r\n): boolean => {\r\n  const iterablePlayerList = Object.entries(playersList);\r\n  const isCellOccupied = iterablePlayerList.some((player) => {\r\n    const [, playerValue] = player;\r\n    return playerValue.coord === newCoord;\r\n  });\r\n  return isCellOccupied;\r\n};\r\n","import { State, PlayerListType } from \"../../../types\";\r\n\r\n/**\r\n * We need to give highlighting to healthCard\r\n */\r\nexport const getStateCardSelected = (\r\n  state: State,\r\n  currentCardIndex: number\r\n) => {\r\n  const { numberOfPlayer } = state;\r\n\r\n  const newPlayerList = changeSelectedCard(state, currentCardIndex);\r\n  const hasAnyCardSelected = newPlayerList[numberOfPlayer].inventory.find(\r\n    (card) => {\r\n      return card?.isSelected === true;\r\n    }\r\n  )\r\n    ? true\r\n    : false;\r\n\r\n  const stateWithSelectedCard: State = {\r\n    ...state,\r\n    playerList: newPlayerList,\r\n    gameState: {\r\n      type: \"gameStarted.applyCard\",\r\n    },\r\n  };\r\n\r\n  const stateWithoutSelectedCard: State = {\r\n    ...state,\r\n    playerList: newPlayerList,\r\n    gameState: {\r\n      type: \"gameStarted.playerMove\",\r\n    },\r\n  };\r\n\r\n  switch (hasAnyCardSelected) {\r\n    case true:\r\n      return stateWithSelectedCard;\r\n    case false:\r\n      return stateWithoutSelectedCard;\r\n  }\r\n};\r\n\r\nconst changeSelectedCard = (\r\n  state: State,\r\n  currentCardIndex: number\r\n  /*   hasCurrentCardHighlightning: boolean */\r\n) => {\r\n  const { playerList, numberOfPlayer } = state;\r\n  const inventory = playerList[numberOfPlayer].inventory;\r\n  const targetCard = inventory[currentCardIndex];\r\n\r\n  /**\r\n   * Return opposite\r\n   */\r\n  const selectedCard = {\r\n    ...targetCard,\r\n    isSelected: !targetCard?.isSelected,\r\n  };\r\n\r\n  /*  const notSelectedCard = {\r\n    ...targetCard,\r\n    isSelected: false,\r\n  }; */\r\n\r\n  const newInventory = inventory.map((card, index) => {\r\n    if (index === currentCardIndex) {\r\n      return { ...card, isSelected: !targetCard?.isSelected };\r\n    } else {\r\n      return { ...card, isSelected: false };\r\n    }\r\n  });\r\n\r\n  const newPlayerList: PlayerListType = {\r\n    ...playerList,\r\n    [numberOfPlayer]: {\r\n      ...playerList[numberOfPlayer],\r\n      inventory: newInventory,\r\n    },\r\n  };\r\n  return newPlayerList;\r\n};\r\n","import { State, MoveDirection, AvailableCellListType } from \"../../../types\";\r\n\r\nimport { ActionType } from \"../../../reducer\";\r\nimport { MOVE_DIRECTION_LIST } from \"../../../../shared/config\";\r\n\r\nimport { getNextPlayerCoord } from \"../common/getNextPlayerCoord\";\r\nimport { getPlayerMoveResult } from \"./getPlayerMoveResult\";\r\nimport { checkCanTakeCell } from \"./checkCanTakeCell\";\r\nimport { changePlayerCoord } from \"./changePlayerCoord\";\r\nimport { getStateCardSelected } from \"../common/getStateCardSelected\";\r\nimport { getNeighboringCellList } from \"../common/getNeighboringCellList\";\r\n\r\nexport const playerMove = (action: ActionType, state: State): State => {\r\n  switch (action.type) {\r\n    case \"req-checkAvailableNeighboringCell\": {\r\n      return getAvailableCells(state);\r\n    }\r\n\r\n    case \"playerMoved\": {\r\n      const direction = action.payload;\r\n      return getStatePlayerMoved(state, direction);\r\n    }\r\n\r\n    case \"req-cleanAvailableCells\": {\r\n      return getStateClearedAvailableCells(state);\r\n    }\r\n\r\n    case \"req-getPlayerMoveResult\": {\r\n      return getPlayerMoveResult(state);\r\n    }\r\n\r\n    case \"cardChoosed\": {\r\n      const target = action.payload;\r\n      return getStateCardSelected(state, target);\r\n    }\r\n\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * Changing coordinates of player if he can take the cell in certain direction.\r\n */\r\nconst getStatePlayerMoved = (state: State, direction: MoveDirection): State => {\r\n  const { playerList, numberOfPlayer, gameField } = state;\r\n\r\n  const prevPlayerCoord = playerList[numberOfPlayer].coord;\r\n  const nextPlayerCoord = getNextPlayerCoord(prevPlayerCoord, direction);\r\n\r\n  /*   const canTakeNextCell = gameField.values[nextPlayerCoord].availableForTake;\r\n   */\r\n\r\n  const canTakeNextCell = state.availableCellsCoords?.includes(nextPlayerCoord);\r\n\r\n  switch (canTakeNextCell) {\r\n    case true: {\r\n      const newPlayerList = changePlayerCoord(state, nextPlayerCoord);\r\n      const newState: State = {\r\n        ...state,\r\n        playerList: newPlayerList,\r\n        doEffect: { type: \"!cleanMarkedCell\" },\r\n      };\r\n      return newState;\r\n    }\r\n    case false: {\r\n      return state;\r\n    }\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};\r\n\r\n/**\r\n * Current player get field \"availableForTake\" with coordinate of cells that can be taken\r\n */\r\n\r\nconst getAvailableCells = (state: State): State => {\r\n  const { playerList, numberOfPlayer, gameField } = state;\r\n  const prevPlayerCoord = playerList[numberOfPlayer].coord;\r\n  const neighboringCellList = getNeighboringCellList(\r\n    prevPlayerCoord,\r\n    gameField\r\n  );\r\n\r\n  /**\r\n   * Returns the coordinates of Cell that can be taken by player.\r\n   */\r\n  const availableCellList: AvailableCellListType = neighboringCellList.filter(\r\n    (cellItem) => {\r\n      const { direction, coord } = cellItem;\r\n\r\n      return checkCanTakeCell(state, coord, direction);\r\n    }\r\n  );\r\n\r\n  const availableCellsCoords = availableCellList.map((cellItem) => {\r\n    const { direction, coord } = cellItem;\r\n    return coord;\r\n  });\r\n\r\n  return {\r\n    ...state,\r\n    availableCellsCoords,\r\n  };\r\n};\r\n\r\n/**\r\n *Remove from current player availableCellList\r\n */\r\nconst getStateClearedAvailableCells = (state: State): State => {\r\n  const { playerList, numberOfPlayer, gameField } = state;\r\n\r\n  return {\r\n    ...state,\r\n    doEffect: { type: \"!getPlayerMoveResult\" },\r\n    availableCellsCoords: null,\r\n  };\r\n};\r\n","import { State, PlayerListType, MoveDirection, CellType } from \"../../../types\";\r\n\r\nimport { switchToNextPlayer } from \"../../../../shared/State\";\r\n/**\r\n * @returns A new state depending on the result of the player's movement.\r\n */\r\n\r\nexport const getPlayerMoveResult = (state: State) => {\r\n  const { gameField, playerList, numberOfPlayer, dice } = state;\r\n\r\n  const newPlayerCoord = playerList[numberOfPlayer].coord;\r\n  const newCellWithPlayer = gameField.values[newPlayerCoord];\r\n  const isLastStepOfMove = dice === 1;\r\n\r\n  const takeFinish = newCellWithPlayer?.name === \"finish\";\r\n\r\n  const takeCard =\r\n    newCellWithPlayer?.name === \"commonCell\" &&\r\n    newCellWithPlayer.cardItem.length > 0;\r\n\r\n  const metEnemyCard =\r\n    newCellWithPlayer?.name === \"commonCell\" && state.enemyList[newPlayerCoord]\r\n      ? true\r\n      : false;\r\n\r\n  // TODO: Is flat switch okey? Or i need it nested?!\r\n  switch (true) {\r\n    // TODO: переиспользуемая часть state\r\n    case takeFinish: {\r\n      const newState: State = {\r\n        ...state,\r\n        dice: state.dice - 1,\r\n        gameResult: \"Вы выиграли\",\r\n      };\r\n      return newState;\r\n    }\r\n\r\n    case takeCard: {\r\n      //Rename ..HealthCard to ...Card\r\n      const newState: State = {\r\n        ...state,\r\n        dice: state.dice - 1,\r\n        gameState: {\r\n          type: \"gameStarted.takeCard\",\r\n        },\r\n        doEffect: { type: \"!openCard\" },\r\n      };\r\n      return newState;\r\n    }\r\n\r\n    case metEnemyCard: {\r\n      const newState: State = {\r\n        ...state,\r\n        dice: state.dice - 1,\r\n        gameState: {\r\n          type: \"gameStarted.interactEnemyCard\",\r\n        },\r\n        doEffect: { type: \"!checkApperanceEnemyCard\" },\r\n      };\r\n      return newState;\r\n    }\r\n\r\n    case isLastStepOfMove: {\r\n      /*  const changedPartState = switchToNextPlayer(); */\r\n      const newState: State = {\r\n        ...state,\r\n        dice: 0,\r\n        gameState: {\r\n          type: \"gameStarted.getPlayersOrder\",\r\n        },\r\n        doEffect: {\r\n          type: \"!getNextPlayer\",\r\n        },\r\n      };\r\n      return newState;\r\n    }\r\n\r\n    default: {\r\n      const newState: State = {\r\n        ...state,\r\n        dice: state.dice - 1,\r\n        gameState: {\r\n          type: \"gameStarted.playerMove\",\r\n        },\r\n        doEffect: { type: \"!checkAvailableNeighboringCell\" },\r\n      };\r\n      return newState;\r\n    }\r\n  }\r\n};\r\n","import { State } from \"../../../types\";\r\n\r\nexport const changePlayerCoord = (state: State, newPlayerCoord: string) => {\r\n  const { playerList, numberOfPlayer } = state;\r\n\r\n  const newPlayerList = {\r\n    ...playerList,\r\n    [numberOfPlayer]: {\r\n      ...playerList[numberOfPlayer],\r\n      coord: newPlayerCoord,\r\n    },\r\n  };\r\n  return newPlayerList;\r\n};\r\n","import { State, GameField, PlayerListType, CommonCell } from \"../../../types\";\r\n\r\nimport { ActionType } from \"../../../reducer\";\r\nimport { openCard } from \"./openCard\";\r\nimport { deleteCard } from \"./deleteCard\";\r\n\r\nexport const takeCard = (action: ActionType, state: State): State => {\r\n  switch (action.type) {\r\n    case \"req-openCard\": {\r\n      return getStateOpenCard(state);\r\n    }\r\n\r\n    case \"req-takeCard\": {\r\n      return getStateCardTaken(state);\r\n    }\r\n\r\n    case \"req-deleteCard\": {\r\n      return getStateDeletedCard(state);\r\n    }\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst getStateOpenCard = (state: State): State => {\r\n  const { gameField, numberOfPlayer, playerList } = state;\r\n  const playerCoordIndex = playerList[numberOfPlayer].coord;\r\n  const currCell = gameField.values[playerCoordIndex];\r\n\r\n  const cellWithOpenCard = openCard(currCell);\r\n\r\n  const newGameField: GameField = {\r\n    ...gameField,\r\n    values: { ...gameField.values, [playerCoordIndex]: cellWithOpenCard },\r\n  };\r\n\r\n  return {\r\n    ...state,\r\n    gameField: newGameField,\r\n    doEffect: { type: \"!takeCard\" },\r\n  };\r\n};\r\n\r\nconst getStateCardTaken = (state: State): State => {\r\n  const { gameField, numberOfPlayer, playerList } = state;\r\n  const player = playerList[numberOfPlayer];\r\n\r\n  const cardItems = gameField.values[player.coord].cardItem;\r\n\r\n  const newPlayer = {\r\n    ...player,\r\n    inventory: [...player.inventory, ...cardItems],\r\n  };\r\n\r\n  const newPlayerList: PlayerListType = {\r\n    ...playerList,\r\n    [numberOfPlayer]: newPlayer,\r\n  };\r\n\r\n  return {\r\n    ...state,\r\n    doEffect: { type: \"!deleteCard\" },\r\n    playerList: newPlayerList,\r\n  };\r\n};\r\n\r\nconst getStateDeletedCard = (state: State): State => {\r\n  const { gameField, numberOfPlayer, playerList } = state;\r\n  const playerCoordIndex = playerList[numberOfPlayer].coord;\r\n  const currCell = gameField.values[playerCoordIndex];\r\n  const cellWithoutCard = deleteCard(currCell);\r\n\r\n  const newGameField: GameField = {\r\n    ...gameField,\r\n    values: {\r\n      ...gameField.values,\r\n      [playerCoordIndex]: cellWithoutCard,\r\n    },\r\n  };\r\n\r\n  return {\r\n    ...state,\r\n    gameField: newGameField,\r\n    gameState: {\r\n      type: \"gameStarted.getPlayersOrder\",\r\n    },\r\n    doEffect: {\r\n      type: \"!getNextPlayer\",\r\n    },\r\n    dice: 0,\r\n  };\r\n};\r\n","import { CellType, CardItem } from \"../../../types\";\r\n\r\nexport const openCard = (cell: CellType): CellType => {\r\n  if (cell.name === \"commonCell\") {\r\n    /**\r\n     * When we open card we now for sure that in cell lying only one card\r\n     */\r\n    const cardItemWithOpenCard = cell.cardItem.map((cardItem) => {\r\n      if (cardItem) {\r\n        const openedCard: CardItem = {\r\n          ...cardItem,\r\n          apperance: \"open\",\r\n        };\r\n        return openedCard;\r\n      } else {\r\n        return null;\r\n      }\r\n    });\r\n\r\n    const openedItem: CellType = {\r\n      ...cell,\r\n      cardItem: cardItemWithOpenCard,\r\n    };\r\n\r\n    return openedItem;\r\n  } else {\r\n    return cell;\r\n  }\r\n};\r\n","import { CommonCell, CellType } from \"../../../types\";\r\n\r\nexport const deleteCard = (currCell: CellType): CellType => {\r\n  /**\r\n   * When we delete card we now for sure that in cell lying only one card\r\n   */\r\n  if (currCell.name === \"commonCell\") {\r\n    const cellWithoutHealth: CommonCell = {\r\n      ...currCell,\r\n      cardItem: [],\r\n    };\r\n    return cellWithoutHealth;\r\n  } else return currCell;\r\n};\r\n","import { State } from \"../../types\";\r\nimport { ActionType } from \"../../reducer\";\r\n\r\n\r\nexport const trownDice = (action: ActionType, state: State): State => {\r\n  switch (action.type) {\r\n    case \"diceThrown\": {\r\n      return {\r\n        ...state,\r\n        dice: action.payload,\r\n        gameState: {\r\n          type: \"gameStarted.playerMove\",\r\n        },\r\n        doEffect: { type: \"!checkAvailableNeighboringCell\" },\r\n      };\r\n    }\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { State } from \"../../../types\";\r\n\r\nexport const getBattleResult = (state: State): State => {\r\n  const { dice } = state;\r\n\r\n  switch (dice) {\r\n    case 1:\r\n    case 2: {\r\n      return getStatePlayerRunsAway(state);\r\n    }\r\n\r\n    case 3: {\r\n      return getStatePlayetLoseHealth(state);\r\n    }\r\n\r\n    case 4: {\r\n      return getStatePLayerWon(state);\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nconst getStatePlayerRunsAway = (state: State): State => {\r\n  // Полностью передать управление в playerMove?!\r\n  // dice=1 - убегает на 1\r\n  return {\r\n    ...state,\r\n    dice: 1,\r\n    gameState: {\r\n      ...state,\r\n      type: \"gameStarted.playerMove\",\r\n    },\r\n    doEffect: { type: \"!checkAvailableNeighboringCell\" },\r\n  };\r\n};\r\n\r\nconst getStatePlayetLoseHealth = (state: State): State => {\r\n  const { playerList, numberOfPlayer } = state;\r\n  const newPlayerHealth = playerList[numberOfPlayer].health - 1;\r\n  const isPlayerAlive = newPlayerHealth > 0 ? true : false;\r\n\r\n  const newPlayerList = {\r\n    ...playerList,\r\n    [numberOfPlayer]: {\r\n      ...playerList[numberOfPlayer],\r\n      health: playerList[numberOfPlayer].health - 1,\r\n    },\r\n  };\r\n\r\n  // TODO :  режим боя должен вестись до победы\\побега\\проигрыша\r\n  if (isPlayerAlive) {\r\n    const newState: State = {\r\n      ...state,\r\n      dice: 0,\r\n      gameState: {\r\n        type: \"gameStarted.getPlayersOrder\",\r\n      },\r\n      doEffect: {\r\n        type: \"!getNextPlayer\",\r\n      },\r\n      playerList: newPlayerList,\r\n    };\r\n\r\n    return newState;\r\n  } else {\r\n    console.log(`игрок №${numberOfPlayer} погиб`);\r\n\r\n    return {\r\n      ...state,\r\n      gameState: { type: \"endGame\" },\r\n      gameResult: \"Вы проиграли\",\r\n      doEffect: null,\r\n    };\r\n  }\r\n};\r\n\r\nconst getStatePLayerWon = (state: State): State => {\r\n  const { enemyList, numberOfPlayer, playerList } = state;\r\n  const currentCoord = playerList[numberOfPlayer].coord;\r\n  const newEnemyList = { ...enemyList };\r\n  delete newEnemyList[currentCoord];\r\n\r\n  return {\r\n    ...state,\r\n    enemyList: newEnemyList,\r\n    dice: 0,\r\n    gameState: {\r\n      type: \"gameStarted.getPlayersOrder\",\r\n    },\r\n    doEffect: {\r\n      type: \"!getNextPlayer\",\r\n    },\r\n  };\r\n};\r\n","import { State } from \"../../../types\";\r\n\r\nimport { ActionType } from \"../../../reducer\";\r\nimport { openEnemyCard } from \"./openEnemyCard\";\r\nimport { getBattleResult } from \"./getBattleResult\";\r\n\r\nexport const interactEnemyCard = (action: ActionType, state: State): State => {\r\n  switch (action.type) {\r\n    case \"req-checkEnemyCard\": {\r\n      return getStateCheckApperance(state);\r\n    }\r\n\r\n    case \"req-openEnemyCard\": {\r\n      return getStateOpenCard(state);\r\n    }\r\n\r\n    case \"diceThrown\": {\r\n      const dice = action.payload;\r\n      return getStateDiceIsThrown(state, dice);\r\n    }\r\n\r\n    case \"req-getBattleResult\": {\r\n      return getBattleResult(state);\r\n    }\r\n\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};\r\n\r\nconst getStateCheckApperance = (state: State): State => {\r\n  const { enemyList, playerList, numberOfPlayer } = state;\r\n  const currentCoord = playerList[numberOfPlayer].coord;\r\n\r\n  const isNeedOpenEnemyCard =\r\n    enemyList[currentCoord].apperance === \"open\" ? false : true;\r\n\r\n  switch (true) {\r\n    case isNeedOpenEnemyCard: {\r\n      return {\r\n        ...state,\r\n        doEffect: { type: \"!openEnemyCard\" },\r\n      };\r\n    }\r\n\r\n    case !isNeedOpenEnemyCard: {\r\n      return {\r\n        ...state,\r\n        doEffect: { type: \"!throwBattleDice\" },\r\n        dice: 0,\r\n      };\r\n    }\r\n\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};\r\n\r\nconst getStateOpenCard = (state: State): State => {\r\n  const { enemyList, playerList, numberOfPlayer } = state;\r\n  const currentCoord = playerList[numberOfPlayer].coord;\r\n  /**\r\n   * Need separate method for open EnemyCard\r\n   * Because it dont lying structurally on cell\r\n   */\r\n  const newEnemyList = openEnemyCard(enemyList, currentCoord);\r\n\r\n  return {\r\n    ...state,\r\n    enemyList: newEnemyList,\r\n    //для отрисовки статуса!\r\n    doEffect: { type: \"!throwBattleDice\" },\r\n    dice: 0,\r\n  };\r\n};\r\n\r\nconst getStateDiceIsThrown = (state: State, dice: number): State => {\r\n  return {\r\n    ...state,\r\n    dice: dice,\r\n    doEffect: { type: \"!getBattleResult\" },\r\n  };\r\n};\r\n","import { EnemyCardType, EnemyListType } from \"../../../types\";\r\n\r\nexport const openEnemyCard = (\r\n  enemyList: EnemyListType,\r\n  coord: string\r\n): EnemyListType => {\r\n  const currEnemyCard = enemyList[coord];\r\n  const openedEnemyCard: EnemyCardType = {\r\n    ...currEnemyCard,\r\n    apperance: \"open\",\r\n  };\r\n\r\n  return { ...enemyList, [coord]: openedEnemyCard };\r\n};\r\n","import { PlayerListType } from \"../../../types\";\r\n\r\nexport const deleteSelectedCard = (\r\n  playerList: PlayerListType,\r\n  numberOfPlayer: number\r\n) => {\r\n  const indexCurrPlayer = numberOfPlayer;\r\n  const currInventory = playerList[indexCurrPlayer].inventory;\r\n\r\n  const removedCardIndex = playerList[indexCurrPlayer].inventory.findIndex(\r\n    (card) => {\r\n      return card?.isSelected === true;\r\n    }\r\n  );\r\n\r\n  const newInventory = currInventory.filter((card, indexOfCard) => {\r\n    return indexOfCard !== removedCardIndex;\r\n  });\r\n  return newInventory;\r\n};\r\n","import { PlayerListType } from \"../../../types\";\r\n\r\nexport const changeHealth = (\r\n  playerList: PlayerListType,\r\n  indexTarget: number\r\n) => {\r\n  return playerList[indexTarget].health + 1;\r\n};\r\n","import { State } from \"../../../types\";\r\nimport { ActionType } from \"../../../reducer\";\r\n\r\nimport { getStateCardSelected } from \"../common/getStateCardSelected\";\r\nimport { getStateGiveCard } from \"./getStateGiveCard\";\r\nimport { getStateHealCurrPlayer } from \"./getStateHealCurrPlayer\";\r\nimport { getStateHealAnotherPlayer } from \"./getStateHealAnotherPlayer\";\r\nimport { getStateHoleFilled } from \"./getStateHoleFilled\";\r\n/**\r\n *  In payload get order number of chosen for interact player.\r\n * If this number = indexCurrPlayer we heal player.\r\n * If not - we give context menu: need heal or apply.\r\n */\r\nexport const applyCard = (action: ActionType, state: State): State => {\r\n  const { numberOfPlayer, playerList } = state;\r\n  const [, , phaseInner] = state.gameState.type.split(\".\");\r\n\r\n  const chosenCardType = playerList[numberOfPlayer].inventory.find((card) => {\r\n    return card?.isSelected === true;\r\n  })?.name;\r\n\r\n  switch (action.type) {\r\n    case \"req-shareCard\": {\r\n      const recipientPlayerNumber = action.payload;\r\n      return getStateGiveCard(state, recipientPlayerNumber);\r\n    }\r\n\r\n    case \"cardChoosed\": {\r\n      const target = action.payload;\r\n      return getStateCardSelected(state, target);\r\n    }\r\n\r\n    default: {\r\n      switch (chosenCardType) {\r\n        case \"health\": {\r\n          switch (action.type) {\r\n            case \"req-healPlayer\": {\r\n              /**\r\n               * Need to increase playerHealth\r\n               * Then remove card from inventory\r\n               * Can we do this simultaneously?\r\n               */\r\n\r\n              const indexChosenPlayer = action.payload;\r\n              const isCurrPlayer = indexChosenPlayer === numberOfPlayer;\r\n\r\n              switch (isCurrPlayer) {\r\n                case true:\r\n                  return getStateHealCurrPlayer(state);\r\n\r\n                case false: {\r\n                  return getStateHealAnotherPlayer(state, indexChosenPlayer);\r\n                }\r\n                default:\r\n                  return state;\r\n              }\r\n            }\r\n\r\n            default:\r\n              return state;\r\n          }\r\n        }\r\n\r\n        case \"boards\": {\r\n          switch (action.type) {\r\n            case \"req-fillHole\": {\r\n              const { coord, direction } = action.payload;\r\n              console.log(\"заполнить проем\", coord, direction);\r\n              return getStateHoleFilled(state, coord, direction);\r\n            }\r\n\r\n            default:\r\n              return state;\r\n          }\r\n        }\r\n\r\n        default:\r\n          return state;\r\n      }\r\n    }\r\n  }\r\n};\r\n","import { State } from \"../../../types\";\r\n\r\nexport const getStateGiveCard = (\r\n  state: State,\r\n  recipientPlayerNumber: number\r\n): State => {\r\n  const { playerList, numberOfPlayer } = state;\r\n  const indexCurrPlayer = numberOfPlayer;\r\n\r\n  const currentPlayerInventory = playerList[indexCurrPlayer].inventory;\r\n  const recepientPlayerInventory = playerList[recipientPlayerNumber].inventory;\r\n\r\n  const sharedCardIndex = playerList[indexCurrPlayer].inventory.findIndex(\r\n    (card) => {\r\n      return card?.isSelected;\r\n    }\r\n  );\r\n\r\n  const sharedCard = [...currentPlayerInventory][sharedCardIndex];\r\n  const sharedCardWithoutHighlightning = { ...sharedCard, isSelected: false };\r\n\r\n  const newCurrentPlayerInventory = currentPlayerInventory.filter(\r\n    (card, indexOfCard) => {\r\n      return indexOfCard !== sharedCardIndex;\r\n    }\r\n  );\r\n\r\n  const newRecepientPlayerInventory = [\r\n    ...recepientPlayerInventory,\r\n    sharedCardWithoutHighlightning,\r\n  ];\r\n\r\n  const newPlayerList = {\r\n    ...playerList,\r\n    [indexCurrPlayer]: {\r\n      ...playerList[indexCurrPlayer],\r\n      inventory: newCurrentPlayerInventory,\r\n    },\r\n    [recipientPlayerNumber]: {\r\n      ...playerList[recipientPlayerNumber],\r\n      inventory: newRecepientPlayerInventory,\r\n    },\r\n  };\r\n\r\n  return {\r\n    ...state,\r\n    playerList: newPlayerList,\r\n    gameState: { type: \"gameStarted.playerMove\" },\r\n  };\r\n};\r\n","import { State, PlayerListType } from \"../../../types\";\r\n\r\nimport { deleteSelectedCard } from \"./deleteSelectedCard\";\r\nimport { changeHealth } from \"./changeHealth\";\r\n\r\nexport const getStateHealCurrPlayer = (state: State): State => {\r\n  const { playerList, numberOfPlayer } = state;\r\n  const indexCurrPlayer = numberOfPlayer;\r\n  const newHealth = changeHealth(playerList, indexCurrPlayer);\r\n  const newInventory = deleteSelectedCard(playerList, numberOfPlayer);\r\n  const newPlayerList: PlayerListType = {\r\n    ...playerList,\r\n    [indexCurrPlayer]: {\r\n      ...playerList[indexCurrPlayer],\r\n      inventory: newInventory,\r\n      health: newHealth,\r\n    },\r\n  };\r\n\r\n  return {\r\n    ...state,\r\n    playerList: newPlayerList,\r\n    gameState: { type: \"gameStarted.playerMove\" },\r\n  };\r\n};\r\n","import { State, PlayerListType } from \"../../../types\";\r\n\r\nimport { deleteSelectedCard } from \"./deleteSelectedCard\";\r\nimport { changeHealth } from \"./changeHealth\";\r\nexport const getStateHealAnotherPlayer = (\r\n  state: State,\r\n  indexChosenPlayer: number\r\n): State => {\r\n  const { playerList, numberOfPlayer } = state;\r\n  const indexCurrPlayer = numberOfPlayer;\r\n  const newInventory = deleteSelectedCard(playerList, numberOfPlayer);\r\n  const newHealth = changeHealth(playerList, indexChosenPlayer);\r\n\r\n  const newPlayerList: PlayerListType = {\r\n    ...playerList,\r\n    [indexChosenPlayer]: {\r\n      ...playerList[indexChosenPlayer],\r\n      health: newHealth,\r\n    },\r\n    [indexCurrPlayer]: {\r\n      ...playerList[indexCurrPlayer],\r\n      inventory: newInventory,\r\n    },\r\n  };\r\n\r\n  return {\r\n    ...state,\r\n    playerList: newPlayerList,\r\n    gameState: { type: \"gameStarted.playerMove\" },\r\n  };\r\n};\r\n","import { State, PlayerListType, MoveDirection } from \"../../../types\";\r\n\r\nimport { deleteSelectedCard } from \"./deleteSelectedCard\";\r\n\r\nexport const getStateHoleFilled = (\r\n  state: State,\r\n  coord: number,\r\n  direction: MoveDirection\r\n) => {\r\n  const { gameField, playerList, numberOfPlayer } = state;\r\n  const indexCurrPlayer = numberOfPlayer;\r\n  const newInventory = deleteSelectedCard(playerList, numberOfPlayer);\r\n  const cellWithChosedHole = gameField.values[coord];\r\n\r\n  if (cellWithChosedHole.name === \"commonCell\") {\r\n    const barriersWithClosedHole = cellWithChosedHole.barrierList?.map(\r\n      (barrier) => {\r\n        if (barrier.direction === direction) {\r\n          return { ...barrier, isOpen: false };\r\n        } else return barrier;\r\n      }\r\n    );\r\n\r\n    const newGameField = {\r\n      ...gameField,\r\n      values: {\r\n        ...gameField.values,\r\n        [coord]: {\r\n          ...gameField.values[coord],\r\n          barrierList: barriersWithClosedHole,\r\n        },\r\n      },\r\n    };\r\n\r\n    const newPlayerList: PlayerListType = {\r\n      ...playerList,\r\n      [indexCurrPlayer]: {\r\n        ...playerList[indexCurrPlayer],\r\n        inventory: newInventory,\r\n      },\r\n    };\r\n    const newState: State = {\r\n      ...state,\r\n      gameField: newGameField,\r\n      playerList: newPlayerList,\r\n      gameState: { type: \"gameStarted.playerMove\" },\r\n      doEffect: { type: \"!checkAvailableNeighboringCell\" },\r\n    };\r\n    return newState;\r\n  } else {\r\n    return state;\r\n  }\r\n};\r\n","import { AMOUNT_PLAYERS } from \"../../../shared/config\";\r\nimport { State } from \"../../types\";\r\nimport { ActionType } from \"../../reducer\";\r\n\r\nexport const getPlayersOrder = (action: ActionType, state: State): State => {\r\n  const numberCurrPlayer = state.numberOfPlayer;\r\n  const maxPlayersNumber = AMOUNT_PLAYERS - 1;\r\n  const minPlayersNumber = 0;\r\n  const nextPlayersNumber =\r\n    numberCurrPlayer + 1 > maxPlayersNumber\r\n      ? minPlayersNumber\r\n      : numberCurrPlayer + 1;\r\n\r\n  switch (action.type) {\r\n    case \"req-getNextPlayer\": {\r\n      return {\r\n        ...state,\r\n        numberOfPlayer: nextPlayersNumber,\r\n        gameState: {\r\n          type: \"gameStarted.trownDice\",\r\n        },\r\n      };\r\n    }\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { State } from \"../../types\";\r\nimport { ActionType } from \"../../reducer\";\r\n\r\nexport const endGame = (action: ActionType, state: State): State => {\r\n  switch (action.type) {\r\n    case \"req-getEndScreen\": {\r\n      return {\r\n        ...state,\r\n        gameState: { type: \"getEndScreen\" },\r\n      };\r\n    }\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { reducer } from \"./reducer\";\r\nimport { createStore} from \"redux\";\r\n\r\nexport const store = createStore(\r\n  reducer,\r\n  (window as any).__REDUX_DEVTOOLS_EXTENSION__ &&\r\n    (window as any).__REDUX_DEVTOOLS_EXTENSION__()\r\n);","import { initialState } from \"./initialState\";\r\nimport { waitingStart } from \"./phases/waitingStart\";\r\nimport {\r\n  trownDice,\r\n  playerMove,\r\n  takeCard,\r\n  interactEnemyCard,\r\n  applyCard,\r\n} from \"./phases/gameStarted\";\r\nimport { getPlayersOrder } from \"./phases/gameStarted\";\r\nimport { endGame } from \"./phases/endGame\";\r\nimport { MoveDirection, State, HealthCardType } from \"./types\";\r\nimport { DOMElement } from \"react\";\r\n\r\nexport type ActionType =\r\n  | { type: \"clickedStartButton\" }\r\n  | { type: \"diceThrown\"; payload: number }\r\n  | { type: \"playerMoved\"; payload: MoveDirection }\r\n  | { type: \"req-openCard\" }\r\n  | { type: \"req-changePlayerHealth\" }\r\n  | { type: \"req-deleteCard\" }\r\n  | { type: \"req-getNextPlayer\" }\r\n  | { type: \"req-checkEnemyCard\" }\r\n  | { type: \"req-openEnemyCard\" }\r\n  | { type: \"req-getBattleResult\" }\r\n  | { type: \"req-getEndScreen\" }\r\n  | { type: \"req-checkAvailableNeighboringCell\" }\r\n  | { type: \"req-cleanAvailableCells\" }\r\n  | { type: \"req-getPlayerMoveResult\" }\r\n  | { type: \"req-takeCard\" }\r\n  | { type: \"cardChoosed\"; payload: number }\r\n  | { type: \"req-choosePlayer\" }\r\n  | { type: \"req-healPlayer\"; payload: number }\r\n  | {\r\n      type: \"req-fillHole\";\r\n      payload: { coord: number; direction: MoveDirection };\r\n    }\r\n  | { type: \"req-shareCard\"; payload: number };\r\n\r\nexport const reducer = (\r\n  state: State = initialState,\r\n  action: ActionType\r\n): State => {\r\n  const [phaseOuter, phaseInner] = state.gameState.type.split(\".\");\r\n\r\n  switch (phaseOuter) {\r\n    case \"waitingStart\": {\r\n      return waitingStart(action, state);\r\n    }\r\n\r\n    case \"gameStarted\": {\r\n      switch (phaseInner) {\r\n        case \"trownDice\": {\r\n          return trownDice(action, state);\r\n        }\r\n\r\n        case \"playerMove\": {\r\n          return playerMove(action, state);\r\n        }\r\n\r\n        case \"takeCard\": {\r\n          return takeCard(action, state);\r\n        }\r\n        case \"applyCard\": {\r\n          return applyCard(action, state);\r\n        }\r\n\r\n        case \"interactEnemyCard\": {\r\n          return interactEnemyCard(action, state);\r\n        }\r\n\r\n        case \"getPlayersOrder\": {\r\n          return getPlayersOrder(action, state);\r\n        }\r\n\r\n        default:\r\n          return state;\r\n      }\r\n    }\r\n\r\n    case \"endGame\": {\r\n      return endGame(action, state);\r\n    }\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n","import { Provider, useSelector } from \"react-redux\";\r\n\r\nimport styled from \"styled-components\";\r\n\r\nimport {\r\n  PlayGrid,\r\n  MoveControls,\r\n  Dice,\r\n  StatusList,\r\n  PlayersStatusList,\r\n} from \"./features\";\r\nimport { StartScreen, EndScreen } from \"./pages\";\r\nimport { State } from \"./business/types\";\r\nimport { store } from \"./business/store\";\r\nimport { useOpenCard, useEndScreen, usePlayerMove } from \"./business/effects\";\r\n\r\nconst Field = styled.div`\r\n  margin: 0 auto;\r\n`;\r\n\r\nconst Game = styled.div`\r\n  width: 900px;\r\n  margin: 40px auto;\r\n  display: flex;\r\n  justify-content: center;\r\n  height: 100vh;\r\n`;\r\n\r\nconst LeftPanel = styled.div`\r\n  width: 300px;\r\n  height: 400px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  flex-grow: 0;\r\n  align-items: start;\r\n  margin: 0 30px;\r\n`;\r\n\r\nconst RightPanel = styled.div`\r\n  display: flex;\r\n`;\r\n\r\nconst GameControls = styled.div`\r\n  display: flex;\r\n  width: 100%;\r\n  justify-content: space-between;\r\n`;\r\n\r\nexport function GetApp() {\r\n  const { gameState } = useSelector((state: State) => ({ ...state }));\r\n\r\n  useOpenCard();\r\n  usePlayerMove();\r\n  useEndScreen();\r\n\r\n  const getGameScreen = () => {\r\n    switch (gameState.type) {\r\n      case \"waitingStart\":\r\n        return <StartScreen />;\r\n\r\n      case \"getEndScreen\":\r\n        return <EndScreen />;\r\n\r\n      default:\r\n        return (\r\n          <>\r\n            <RightPanel>\r\n              <PlayersStatusList />\r\n            </RightPanel>\r\n            <Field>\r\n              <PlayGrid />\r\n            </Field>\r\n            <LeftPanel>\r\n              <StatusList />\r\n              <GameControls>\r\n                <Dice />\r\n                <MoveControls />\r\n              </GameControls>\r\n            </LeftPanel>\r\n          </>\r\n        );\r\n    }\r\n  };\r\n\r\n  return <Game>{getGameScreen()}</Game>;\r\n}\r\n\r\nexport const App = () => {\r\n  return (\r\n    <Provider store={store}>\r\n      <GetApp />\r\n    </Provider>\r\n  );\r\n};\r\n","import { useEffect } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\n\r\nimport { State } from \"../types\";\r\n\r\nexport function useOpenCard() {\r\n  const [doEffect] = useSelector((state: State) => [state.doEffect]);\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(\r\n    function openCard() {\r\n      switch (doEffect?.type) {\r\n        case \"!openCard\": {\r\n          const timerOpen = setTimeout(\r\n            () =>\r\n              dispatch({\r\n                type: \"req-openCard\",\r\n              }),\r\n            1000\r\n          );\r\n          return () => {\r\n            clearTimeout(timerOpen);\r\n          };\r\n        }\r\n\r\n        case \"!takeCard\": {\r\n          const timerTakeCard = setTimeout(\r\n            () =>\r\n              dispatch({\r\n                type: \"req-takeCard\",\r\n              }),\r\n            500\r\n          );\r\n          return () => {\r\n            clearTimeout(timerTakeCard);\r\n          };\r\n        }\r\n        case \"!changePlayerHealth\": {\r\n          const timerChangePlayerHealth = setTimeout(\r\n            () =>\r\n              dispatch({\r\n                type: \"req-changePlayerHealth\",\r\n              }),\r\n            500\r\n          );\r\n          return () => {\r\n            clearTimeout(timerChangePlayerHealth);\r\n          };\r\n        }\r\n\r\n        case \"!deleteCard\": {\r\n          const timerDeleteCard = setTimeout(\r\n            () =>\r\n              dispatch({\r\n                type: \"req-deleteCard\",\r\n              }),\r\n            500\r\n          );\r\n          return () => {\r\n            clearTimeout(timerDeleteCard);\r\n          };\r\n        }\r\n        case \"!getNextPlayer\": {\r\n          dispatch({ type: \"req-getNextPlayer\" });\r\n          break;\r\n        }\r\n\r\n        case \"!checkApperanceEnemyCard\": {\r\n          dispatch({\r\n            type: \"req-checkEnemyCard\",\r\n          });\r\n          break;\r\n        }\r\n\r\n        case \"!openEnemyCard\": {\r\n          const timerOpen = setTimeout(\r\n            () =>\r\n              dispatch({\r\n                type: \"req-openEnemyCard\",\r\n              }),\r\n            1000\r\n          );\r\n          return () => {\r\n            clearTimeout(timerOpen);\r\n          };\r\n        }\r\n\r\n        case \"!getBattleResult\": {\r\n          const timerGetResult = setTimeout(\r\n            () => dispatch({ type: \"req-getBattleResult\" }),\r\n            1000\r\n          );\r\n\r\n          return () => {\r\n            clearTimeout(timerGetResult);\r\n          };\r\n        }\r\n\r\n        default:\r\n          break;\r\n      }\r\n    },\r\n    [doEffect]\r\n  );\r\n}\r\n","import { useEffect } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\n\r\nimport { State } from \"../types\";\r\n\r\nexport function usePlayerMove() {\r\n  const [doEffect] = useSelector((state: State) => [state.doEffect]);\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(\r\n    function playerMove() {\r\n      switch (doEffect?.type) {\r\n        case \"!checkAvailableNeighboringCell\": {\r\n          dispatch({\r\n            type: \"req-checkAvailableNeighboringCell\",\r\n          });\r\n          break;\r\n        }\r\n\r\n        case \"!cleanMarkedCell\": {\r\n          const timerMarkCell = setTimeout(\r\n            () =>\r\n              dispatch({\r\n                type: \"req-cleanAvailableCells\",\r\n              }),\r\n            0\r\n          );\r\n          return () => {\r\n            clearTimeout(timerMarkCell);\r\n          };\r\n        }\r\n        case \"!getPlayerMoveResult\": {\r\n          dispatch({\r\n            type: \"req-getPlayerMoveResult\",\r\n          });\r\n          break;\r\n        }\r\n\r\n        default:\r\n          break;\r\n      }\r\n    },\r\n    [doEffect]\r\n  );\r\n}\r\n","import { useEffect } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\n\r\nimport { State } from \"../types\";\r\n\r\nexport function useEndScreen() {\r\n  const dispatch = useDispatch();\r\n  const gameState = useSelector((state: State) => state.gameState);\r\n\r\n  useEffect(\r\n    function getEndScreen() {\r\n      switch (gameState.type) {\r\n        case \"endGame\":\r\n          const timer = setTimeout(\r\n            () => dispatch({ type: \"req-getEndScreen\" }),\r\n            1000\r\n          );\r\n\r\n          return () => clearTimeout(timer);\r\n\r\n        default:\r\n          break;\r\n      }\r\n    },\r\n    [gameState.type, dispatch]\r\n  );\r\n}\r\n","import { ReportHandler } from 'web-vitals';\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport {App} from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}